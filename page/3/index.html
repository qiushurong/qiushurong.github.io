<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.useso.com/css?family=Monda:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  




<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="小树,邱树荣,小树技术博客,小树博客" />








  <link rel="shortcut icon" type="image/x-icon" href="/images/head.ico?v=5.0.1" />






<meta name="description" content="致力于计算机程式开发">
<meta property="og:type" content="website">
<meta property="og:title" content="小树技术博客">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="小树技术博客">
<meta property="og:description" content="致力于计算机程式开发">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小树技术博客">
<meta name="twitter:description" content="致力于计算机程式开发">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 5322878,
      author: '小树'
    }
  };
</script>

  <title> 小树技术博客 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  

  <div class="container one-collumn  
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">小树技术博客</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">用文字留住时间、用博客记录生命</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/10/09/simplehome/" itemprop="url">
                  换个博客主题,换个好心情！
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-10-09T17:28:09+08:00" content="2014-10-09">
              2014-10-09
            </time>
          </span>

<span class="post-count">&nbsp; | &nbsp;字数 79</span>
<span class="post-count">&nbsp; | &nbsp;预计阅读 0分钟</span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/心情杂谈/" itemprop="url" rel="index">
                    <span itemprop="name">心情杂谈</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/10/09/simplehome/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/10/09/simplehome/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>新换了博客的UI，HTML5扁平化三栏样式。这几天有些忙，还有许许多多要优化的地方没时间修改，后面有时间再进行优化，博客暂且就这样子了~</p>
<p>&nbsp;</p>
<p><strong>天晴，心情不多云。</strong></p>
<p>Edit By 小树</p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/10/03/android-annotations-application/" itemprop="url">
                  AndroidAnnotations注解框架之@Application(四)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-10-03T10:55:24+08:00" content="2014-10-03">
              2014-10-03
            </time>
          </span>

<span class="post-count">&nbsp; | &nbsp;字数 373</span>
<span class="post-count">&nbsp; | &nbsp;预计阅读 2分钟</span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Android开发/" itemprop="url" rel="index">
                    <span itemprop="name">Android开发</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/10/03/android-annotations-application/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/10/03/android-annotations-application/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>AndroidAnnotations是一个能够让你快速进行Android开发的开源框架，它能让你专注于真正重要的地方。使代码更加精简，使项目更加容易维护，它的目标就是“Fast Android Development.Easy maintainance”.<br>&nbsp;</p>
</blockquote>
<p>&nbsp;</p>
<p>希望此篇能帮到大家，本系列教程目录：转载请链接并注明：转自 <a href="http://www.qiushurong.cn" title="小树技术博客" target="_blank" rel="external">小树技术博客</a> .</p>
<blockquote>
<p>AndroidAnnotations注解框架之介绍+配置(一)：   <a href="http://www.qiushurong.cn/2014/09/22/android-annotations-introduce/" title="AndroidAnnotations注解框架之介绍+配置(一)" target="_blank" rel="external">(飞机票)</a></p>
<p>[重要]关于Android Application的介绍和用法： <a href="http://www.qiushurong.cn/2014/09/22/android-application/" title="Android真正的入口：Application的用法介绍" target="_blank" rel="external">(飞机票)</a><br>&nbsp;</p>
</blockquote>
<p>1.使用 @EApplication 定义Application</p>
<p><pre class="lang:java decode:true">@EApplication<br>public class MyApplication extends Application {</pre></p>
<p>}<br><br>&nbsp;</p>
<p>2.使用Application</p>
<p>使用 @App 把Application注射到activity或其他组件中</p>
<p><pre class="lang:java decode:true ">@EActivity<br>public class MyActivity extends Activity {</pre></p>
<p>  @App<br>  MyApplication application;</p>
<p>}</p>
<p>@EBean<br>public class MyBean {</p>
<p>  @App<br>  MyApplication application;</p>
<p>}</p>
<p><br>&nbsp;</p>
<p>此后，用法则与普通的android application用法一致，请参考</p>
<p>Android真正的入口：Application的用法介绍：<a href="http://www.qiushurong.cn/2014/09/22/android-application/" title="Android真正的入口：Application的用法介绍" target="_blank" rel="external">链接</a></p>
<p>&nbsp;</p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/10/03/android-annotations-activity/" itemprop="url">
                  AndroidAnnotations注解框架之@Activity(三)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-10-03T10:47:45+08:00" content="2014-10-03">
              2014-10-03
            </time>
          </span>

<span class="post-count">&nbsp; | &nbsp;字数 814</span>
<span class="post-count">&nbsp; | &nbsp;预计阅读 4分钟</span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Android开发/" itemprop="url" rel="index">
                    <span itemprop="name">Android开发</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/10/03/android-annotations-activity/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/10/03/android-annotations-activity/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>AndroidAnnotations是一个能够让你快速进行Android开发的开源框架，它能让你专注于真正重要的地方。使代码更加精简，使项目更加容易维护，它的目标就是“Fast Android Development.Easy maintainance”.<br>&nbsp;</p>
</blockquote>
<p>&nbsp;</p>
<p>希望此篇能帮到大家，本系列教程目录：转载请链接并注明：转自 <a href="http://www.qiushurong.cn" title="小树技术博客" target="_blank" rel="external">小树技术博客</a> .</p>
<blockquote>
<p>AndroidAnnotations注解框架之介绍+配置(一)   <a href="http://www.qiushurong.cn/2014/09/22/android-annotations-introduce/" title="AndroidAnnotations注解框架之介绍+配置(一)" target="_blank" rel="external">(飞机票)</a></p>
<p>[重要]关于Android Activity的介绍和用法：<a href="http://www.qiushurong.cn/2014/10/03/android-activity/" title="Android的应用程序组件-Activity详解" target="_blank" rel="external">(飞机票)</a><br>&nbsp;</p>
</blockquote>
<p>&nbsp;</p>
<h2 id="1-使用-EActivity-定义-Activity"><a href="#1-使用-EActivity-定义-Activity" class="headerlink" title="1.使用 @EActivity 定义 Activity"></a>1.使用 @EActivity 定义 Activity</h2><p>@EActivity注释的Activity，其参数值必须是一个有效的布局资源id,将作为活动视图Content View的内容。</p>
<p>当然，你也可以不使用参数，让value为空，那么你就需要自己在onCreate()中进行视图的初始化</p>
<p>&nbsp;</p>
<p><pre class="lang:java decode:true " title="带参数">@EActivity(R.layout.main)<br>public class MyActivity extends Activity {</pre></p>
<p>}<br>&nbsp;</p>
<p><pre class="lang:java decode:true " title="不带参数">@EActivity<br>public class MyListActivity extends ListActivity {</pre></p>
<pre><code>@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}
</code></pre><p>}<br>&nbsp;</p>
<h2 id="2-注意事项"><a href="#2-注意事项" class="headerlink" title="2.注意事项"></a>2.注意事项</h2><p>&nbsp;</p>
<p>使用 @Activity 注解的 Activity ，与Fragment相同，都会由 AndroidAnnotations框架自动生成一个中间类，Activity_ ，这个类才是真正android系统识别<br>到和调用到的有内容的类，因此，任何跳转或者是注射，都应该使用这个类，例如：</p>
<p><pre class="lang:java decode:true ">@EActivity<br>public class MyActivity extends Activity {<br>  // …<br>}</pre><br>将在同一个包,但在另一个源文件夹下，产生以下子类</p>
<p><pre class="lang:java decode:true">public final class MyActivity_ extends MyActivity {<br>  // …<br>}</pre><br>这个子类将行为添加到您的活动覆盖一些方法，例如onCreate(),委托调用父类。</p>
<p>因此，AndroidManifest.xml中，你必须在所有使用@注解的Activity上，添加下划线_，如:</p>
<p><pre class="lang:java decode:true">&lt;activity android:name=”.MyListActivity_” /&gt;</pre><br><strong>Q:如何启动一个带注释的activity？</strong></p>
<p><strong>A:</strong></p>
<p>通常在安卓,你使用以下代码启动一个activity:</p>
<p><pre class="lang:java decode:true">startActivity(this, MyListActivity.class);</pre><br>但是，使用AA框架之后，你的启动代码就要改成:</p>
<p><pre class="lang:java decode:true ">startActivity(this, MyListActivity_.class);</pre><br>AA也提供一个静态的助手,让你启动自动生成的activity:</p>
<p><pre class="lang:java decode:true ">// Starting the activity<br>MyListActivity_.intent(context).start();</pre></p>
<p>// Building an intent from the activity<br>Intent intent = MyListActivity_.intent(context).get();</p>
<p>// You can provide flags<br>MyListActivity_.intent(context).flags(FLAG_ACTIVITY_CLEAR_TOP).start();</p>
<p>// You can even provide extras defined with @Extra in the activity<br>MyListActivity_.intent(context).myDateExtra(someDate).start();</p>
<p>你可以使用 startActivityForResult() 获取 activity 的返回值</p>
<p>MyListActivity_.intent(context).startForResult();<br>&nbsp;</p>
<p>&nbsp;</p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/10/03/android-activity/" itemprop="url">
                  Android的应用程序组件-Activity详解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-10-03T10:34:48+08:00" content="2014-10-03">
              2014-10-03
            </time>
          </span>

<span class="post-count">&nbsp; | &nbsp;字数 4,493</span>
<span class="post-count">&nbsp; | &nbsp;预计阅读 18分钟</span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Android开发/" itemprop="url" rel="index">
                    <span itemprop="name">Android开发</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/10/03/android-activity/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/10/03/android-activity/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div id="cnblogs_post_body"><br><br>### 【<span style="color: #ff0000;"><strong>Activity</strong></span>】<br><br><a href="http://www.qiushurong.cn/wp-content/uploads/2014/10/pic.jpg" target="_blank" rel="external"><img src="http://www.qiushurong.cn/wp-content/uploads/2014/10/pic-300x207.jpg" alt="pic"></a>  一个Activity是一个应用程序组件，提供一个屏幕，用户可以用来交互为了完成某项任务，例如拨号、拍照、发送email、看地图。每一个activity被给予一个窗口，在上面可以绘制用户接口。窗口通常充满屏幕，但也可以小于屏幕而浮于其它窗口之上。一个应用程序通常由多个activities组成，他们通常是松耦合关系。通常，一个应用程序中的activity被指定为”main”activity，当第一次启动应用程序的时候呈现给用户的那个activity。每一个activity然后可以启动另一个activity为了完成不同的动作。每一次一个activity启动，前一个activity就停止了，但是系统保留activity在一个栈上（“back stack”）。当一个新activity启动，它被推送到栈顶，取得用户焦点。Back Stack符合简单“后进先出”原则，所以，当用户完成当前activity然后点击back按钮，它被弹出栈（并且被摧毁），然后之前的activity恢复。<br><br>当一个activity因新的activity启动而停止，它被通知这种状态转变通过activity的生命周期回调函数。有许多回调函数一个activity可能会收到，源于它自己的状态变化－无论系统创建它、停止它、恢复它、摧毁它－并且每个回调提供你完成适合这个状态的指定工作的机会。例如，当停止的时候，你的activity应该释放任何大的对象，例如网络数据库连接。当activity恢复，你可以重新获得必要的资源和恢复被中断的动作。这些状态转换都是activity的生命周期的部分。<br><br>&nbsp;<br><br>### 【<span style="color: #ff0000;"><strong>Creating an Activity</strong></span>】<br><br>&nbsp;<br><br>创建一个activity，你必须创建一个Activity的子类（或者一个Activity的子类的子类）。在你的子类中，你需要实现系统回调的回调方法，当activity在它的生命周期的多种状态中转换的时候，例如当activity被创建、停止、恢复或摧毁。两个最重要的回调方法是：<br><br><code>onCreate()</code>你必须实现这个方法。系统调用它当创建你的activity的时候。在你的实现中，你应该初始化你的activity的基本的组件。更重要的是，这里就是你必须调用setContentView（）来定义activity用户接口而已的地方。<code>onPause()</code>系统调用这个方法当用户离开你的activity（虽然不总是意味着activity被摧毁）。这通常是你应该提交任何变化，那此将会超越user session而存在的（因为用户可能不再回来）。　　有若干其它生命周期回调函数你应该使用为了提供一个流畅的用户体验，并表操作异常中断会引起你的activity被中断甚至被摧毁。<br><br>1、Implementing a user interface<br><br>一个activity的用户接口被一个层次化的视图提供－－继承于View类的对象。每个View控制activity窗口中的一个特定矩形区域并且能响应用户交互。例如，一个view可能是个button，初始化动作当用户触摸它的时候。<br><br>Android提供大量预定义的view，你可以使用来设计和组件你的布局。“Widgets”是一种给屏幕提供可视化(并且交互)元素的view，例如按钮、文件域、复选框或者仅仅是图像。“Layouts”是继承于ViewGroup的View，提供特殊的布局模型为它的子view，例如线程布局、格子布局或相关性布局。你可以子类化View和ViewGroup类（或者存在的子类）来创建自己的widget和而已并且应用它们到你的activity布局中。<br><br>最普通的方法是定义一个布局使用view加上XML布局文件保存在你的程序资源里。这样，你可以单独维护你的用户接口设计，而与定义activity行为的代码无关。你可以设置布局作为UI使用setContentView()，传递资源布局的资源ID。可是，你也可以创建新Views在你的activity代码，并且创建一个view层次通过插入新Views到ViewGroup，然后使用那个布局通过传递到根ViewGroup给setContentView()。<br><br>&nbsp;<br><br>### 【<span style="color: #ff0000;"><strong>Declaring the activity in the manifest</strong></span>】<br><br>&nbsp;<br><br>你必须声明你的activity在manifest文件为了它可以被系统访问。要声明你的activity，打开你的manifest文件，添加一个&lt;activity&gt;元素作为&lt;application&gt;元素的子元素。例如：<br><br><img src="http://pic002.cnblogs.com/images/2011/292994/2011060713235630.png" alt=""><br><br>&nbsp;<br><br>### 【<span style="color: #ff0000;"><strong>Using intent filters</strong></span>】<br><br>&nbsp;<br><br>一个&lt;activity&gt;元素也能指定多种intent filters－－使用&lt;inetent-filter&gt;元素－－为了声明其它应用程序可以激活它。<br><br>当你创建一个新应用程序使用Android SDK工具，存根activity自动为你创建，包含一个intent filter，声明了activity响应”main”动作，并且应该被 放置 在”launcher”分类。Intent filter看起来像这个样子。<br><br><img src="http://pic002.cnblogs.com/images/2011/292994/2011060713284562.png" alt=""><br><br>&lt;action&gt;元素指定这是一个”main”入口点对这个应用程序。&lt;category&gt;元素指定，这个activity应该被列入系统应用程序列表中（为了允许用户启动这个activity）。<br><br>如果你希望应用程序自包含，并且不希望别的应用程序激活它的activities，那么你不需要任何其它intent filters。只有一个activity应该有“main”动作和”launcher“分类，就像前面这个例子。你不希望被其它应用程序访问原Activities应该没有intent filters而且你能启动他们通过自己显示的intent。<br><br>可是，如果你希望你的activity响应影含的intents，从其它应用程序（和你自己的），那么你必须定义额外的intent filters为这个activity。每一种你希望响应的类型的intent，你必须包含&lt;intent-filter&gt;，包含&lt;action&gt;元素，可选的，一个&lt;category&gt;元素并且/或一个&lt;data&gt;元素。这些元素指定你的activity能响应的intent的类型。<br><br>&nbsp;<br><br>### 【<span style="color: #ff0000;"><strong>Starting an Activity</strong></span>】<br><br>&nbsp;<br><br>你可以开启另一个activity通过startActivity()，传递一个Intent描述了你希望启动的Activity。Intent指定要么准备的activity你希望启动或描述你希望完成的动作（操作系统选择合适的activity为你，可能来自定不同的应用程序）。一个intent可以传输小量数据被启动的activity使用。<br><br>完全工作在你的应用程序之内，你将经常需要简单的启动一个未知的activity。你可以这么通过创建一个intent显示的定义你希望启动的activity，使用类名。例如，下面显示一个activity怎么启动另一个activity命名为SignInActivity：<br><br><img src="http://pic002.cnblogs.com/images/2011/292994/2011060714314531.png" alt=""><br><br>可是，你的应用程序或许希望执行一些动作，例如发送一份邮件、文件消息或者状态更新，使用你的activity的数据。在这种情况下，你的应用程序或许没有它自己的activity来完成这个动作，因此你可以促使设备上其它应用程序提供的activity来完成你的动作。这才是intent真正有价值的地方－－你可以创建一个intent描述一个你希望执行的动作，然后系统启动一个合适的activity从其它应用程序。如果有多种activities可以处理这个intent，那么 用户可以选择哪一个来执行。例如，如果你希望允许用户发送邮件，你可以创建下面的Intent:<br><br><img src="http://pic002.cnblogs.com/images/2011/292994/2011060714364512.png" alt=""><br><br>EXTRA_EMAIL额外的添加给intent一个字符串数组指定email地址，当一个邮件应用程序响应这个intent的时候，它读取这些字符串数组并且放置他们到相应字段。在这种情况下，email应用程序的activity启动并且当用户执行完，你的activity恢复。<br><br>&nbsp;<br><br>### 【<span style="color: #ff0000;"><strong>Starting an activity for a result</strong></span>】<br><br>&nbsp;<br><br>有时，你或许希望接收一个结果从你启动的activity。在这种情况下，开启这个activity通过startActivityForResult()(而不是startActivity())。然后从随后的activity接收结果，实现onActiviryResult()回调函数。当随后的activity完成，它返回一个结果给你的onActivityResult()函数通过一个intent。<br><br>例如，或许你希望用户选择他们中的一个联系人，所以你的activity可以对这个联系人做些事情。下面是你怎么建立这样一个Intent和操作结果：<br><br><img src="http://pic002.cnblogs.com/images/2011/292994/2011060714493471.png" alt=""><br><br>这个例子展现了基本的逻辑你应该使用的在你的onActivityResult()函数中，为了操作一个activity的结果。第一个条件检测是否请求成功－－如果是，那么 resultCode将会是RESULT_OK－－并且是否这个请求是否是这个响应是响知道－－在这种情况下，requestCode匹配第二个参数用startActivityForResult()的参数。在那里，代码操作activity结果通过查询返回在intent中的数据（data参数）。<br><br>将发生的是，一个ContentResolver实现查询content provider，返回一个Cursor允许读查询的数据。<br><br>&nbsp;<br><br>### 【<span style="color: #ff0000;"><strong>Shut Down an Activity</strong></span>】<br><br>&nbsp;<br><br>你可以关闭一个activity通过调用自身的finish()方法。你也可以关闭一个独立的activity你之前启动的通过finiActivity()。<br><br><strong>注意</strong>：在大多数情况下，你不应该显示结果一个activity使用这些方法。正在下文所讨论的关于activity的生命周期，Android系统管理一个activity的生命周期为你，所以你不需要结果你自己的activity。调用这些函数对用户体验有害并且只有在你决对不希望用户返回到这个activity的情况下。<br><br>&nbsp;<br><br>### 【<span style="color: #ff0000;">A</span><strong><span style="color: #ff0000;">ctivity四种基本状态</span></strong>】<br><br>&nbsp;<br><br><strong><em>1.Active/Runing</em></strong><br><div class="para">一个新 Activity 启动入栈后，它显示在屏幕最前端，处理是处于栈的最顶端（Activity栈顶），此时它处于可见并可和用户交互的激活状态,叫做活动状态或者运行状态（active or running）。</div><br><div class="para"><em>2<strong>.</strong><span class="Apple-converted-space"> </span></em><strong><em>Paused</em></strong></div><br><div class="para">当 Activity失去焦点， 被一个新的非全屏的Activity 或者一个透明的Activity 被放置在栈顶，此时的状态叫做暂停状态（Paused）。此时它依然与窗口管理器保持连接，Activity依然保持活力（保持所有的状态，成员信息，和窗口管理器保持连接），但是在系统内存极端低下的时候将被强行终止掉。所以它仍然可见，但已经失去了焦点故不可与用户进行交互。</div><br><div class="para"><em>3<strong>.<span class="Apple-converted-space"> </span></strong></em><strong><em>Stoped</em></strong></div><br><div class="para">如果一个Activity被另外的Activity完全覆盖掉，叫做停止状态（Stopped）。它依然保持所有状态和成员信息，但是它不再可见，所以它的窗口被隐藏，当系统内存需要被用在其他地方的时候，Stopped的Activity将被强行终止掉。</div><br><div class="para"><em>4<strong>.<span class="Apple-converted-space"> </span></strong></em><strong><em>Killed</em></strong></div><br><div class="para">如果一个Activity是Paused或者Stopped状态，系统可以将该Activity从内存中删除，Android系统采用两种方式进行删除，要么要求该Activity结束，要么直接终止它的进程。当该Activity再次显示给用户时，它必须重新开始和重置前面的状态。</div><br><div class="para"></div><br><div class="para"><br><br>### 【<span style="color: #ff0000;">A</span><strong><span style="color: #ff0000;">ctivity状态的转换</span></strong>】<br><br>&nbsp;<br><br>当一个 Activity 实例被创建、销毁或者启动另外一个 Activity 时，它在这四种状态之间进行转换，这种转换的发生依赖于用户程序的动作。下图说明了 Activity 在不同状态间转换的时机和条件：<br><br></div><br><div class="para"></div><br><div class="para"><a href="http://www.qiushurong.cn/wp-content/uploads/2014/10/android-activity-four-state.bmp" target="_blank" rel="external"><img src="http://www.qiushurong.cn/wp-content/uploads/2014/10/android-activity-four-state.bmp" alt="android-activity-four-state"></a></div><br><div class="para"></div><br><div class="para"><strong>图**</strong>1. Activity<span class="Apple-converted-space"> </span><strong><strong>的状</strong></strong>态转换<strong></strong></div><br><div class="para"></div><br><div class="para">如上所示，Android 程序员可以决定一个 Activity 的“生”，但不能决定它的“死”，也就是说程序员可以启动一个 Activity，但是却不能手动的“结束”一个 Activity。当你调用<span class="Apple-converted-space"> </span><em>Activity.finish()</em>方法时，结果和用户按下 BACK 键一样：告诉 Activity Manager 该 Activity 实例完成了相应的工作，可以被“回收”。随后 Activity Manager 激活处于栈第二层的 Activity 并重新入栈，同时原 Activity 被压入到栈的第二层，从 Active 状态转到 Paused 状态。例如：从 Activity1 中启动了 Activity2，则当前处于栈顶端的是 Activity2，第二层是 Activity1，当我们调用<em>Activity2.finish()</em>方法时，Activity Manager 重新激活 Activity1 并入栈，Activity2 从 Active 状态转换 Stoped 状态，<em>Activity1. onActivityResult(int requestCode, int resultCode, Intent data)</em>方法被执行，Activity2 返回的数据通过<em>data</em>参数返回给 Activity1。</div><br><div class="para"></div><br><div class="para"><br><br>### 【<span style="color: #ff0000;">A</span><span style="color: #ff0000;">ctivity栈</span><strong>】<br><br>&nbsp;<br><br></strong></div><br><div class="para">Android 是通过一种 Activity 栈的方式来管理 Activity 的，一个 Activity 的实例的状态决定它在栈中的位置。处于前台的 Activity 总是在栈的顶端，当前台的 Activity 因为异常或其它原因被销毁时，处于栈第二层的 Activity 将被激活，上浮到栈顶。当新的 Activity 启动入栈时，原 Activity 会被压入到栈的第二层。一个 Activity 在栈中的位置变化反映了它在不同状态间的转换。Activity 的状态与它在栈中的位置关系如下图所示</div><br><div class="para"></div><br><div class="para"><br><div class="text_pic layoutinline" data-layout="inline"><a href="http://www.qiushurong.cn/wp-content/uploads/2014/10/android-activity-stack.jpg" target="_blank" rel="external"><img src="http://www.qiushurong.cn/wp-content/uploads/2014/10/android-activity-stack.jpg" alt="android-activity-stack"></a></div><br></div><br><div class="para">图<strong><strong>2. Activity<span class="Apple-converted-space"> </span></strong></strong>的状<strong><strong>态</strong></strong>与它在<strong><strong>栈</strong></strong>中的位置<strong><strong>关</strong></strong>系<strong></strong></div><br><div class="para"></div><br><div class="para">如上所示，除了最顶层即处在 Active 状态的 Activity 外，其它的 Activity 都有可能在系统内存不足时被回收，一个 Activity 的实例越是处在栈的底层，它被系统回收的可能性越大。系统负责管理栈中 Activity 的实例，它根据 Activity 所处的状态来改变其在栈中的位置。</div><br><div class="para"></div><br><div class="para"><br><br>### 【<span style="color: #ff0000;">A</span><span style="color: #ff0000;">ctivity状态方法通知</span><strong>】<br><br>&nbsp;<br><br>下面的图显示了Activity的重要状态转换，矩形框表明Activity在状态转换之间的回调接口，开发人员可以重载实现以便执行相关代码，带有颜色的椭圆形表明Activity所处的状态。<br><br></strong></div><br><div class="para"><a href="http://www.qiushurong.cn/wp-content/uploads/2014/10/android-activity.bmp" target="_blank" rel="external"><img src="http://www.qiushurong.cn/wp-content/uploads/2014/10/android-activity.bmp" alt="android-activity"></a></div><br><div class="para"></div><br><div class="para">图<strong><strong>3</strong></strong>. Activity<span class="Apple-converted-space"> </span><strong><strong>的状</strong></strong>态<strong>**转换的方法和实现</strong></div><br><div class="para">在上图中，Activity有三个关键的循环：</div><br><div class="para">1. 整个的生命周期，从onCreate(Bundle)开始到onDestroy()结束。Activity在onCreate()设置所有的“全局”状态，在onDestory()释放所有的资源。例如：某个Activity有一个在后台运行的线程，用于从网络下载数据，则该Activity可以在onCreate()中创建线程,在onDestory()中停止线程。</div><br><div class="para">2. 可见的生命周期，从onStart()开始到onStop()结束。在这段时间，可以看到Activity在屏幕上，尽管有可能不在前台，不能和用户交互。在这两个接口之间，需要保持显示给用户的UI数据和资源等，例如：可以在onStart中注册一个IntentReceiver来监听数据变化导致UI的变动，当不再需要显示时候，可以在onStop()中注销它。onStart()，onStop()都可以被多次调用，因为Activity随时可以在可见和隐藏之间转换。</div><br><div class="para">3.<span class="Apple-converted-space"> </span>前台的生命周期，从onResume()开始到onPause()结束。在这段时间里，该Activity处于所有 Activity的最前面，和用户进行交互。Activity可以经常性地在resumed和paused状态之间切换，例如：当设备准备休眠时，当一个 Activity处理结果被分发时，当一个新的Intent被分发时。所以在这些接口方法中的代码应该属于非常轻量级的。</div><br><div class="para"></div><br><div class="para"></div><br></div>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/09/23/android-annotations-pref/" itemprop="url">
                  AndroidAnnotations注解框架之@Pref(二)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-09-23T11:21:00+08:00" content="2014-09-23">
              2014-09-23
            </time>
          </span>

<span class="post-count">&nbsp; | &nbsp;字数 1,534</span>
<span class="post-count">&nbsp; | &nbsp;预计阅读 8分钟</span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Android开发/" itemprop="url" rel="index">
                    <span itemprop="name">Android开发</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/09/23/android-annotations-pref/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/09/23/android-annotations-pref/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>AndroidAnnotations是一个能够让你快速进行Android开发的开源框架，它能让你专注于真正重要的地方。使代码更加精简，使项目更加容易维护，它的目标就是“Fast Android Development.Easy maintainance”.<br>&nbsp;</p>
</blockquote>
<p>&nbsp;</p>
<p>希望此篇能帮到大家，本系列教程目录：<span style="color: #ff0000;">转载请链接并注明：转自 <a href="http://www.qiushurong.cn" title="小树技术博客" target="_blank" rel="external">小树技术博客</a> .</span></p>
<blockquote>
<p>AndroidAnnotations注解框架之介绍+配置(一)   <a href="http://www.qiushurong.cn/2014/09/22/android-annotations-introduce/" title="AndroidAnnotations注解框架之介绍+配置(一)" target="_blank" rel="external">(飞机票)</a><br>&nbsp;</p>
</blockquote>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #3366ff;">Anno 提供了一种类型安全的方式，让你可以去调用Android<span class="Apple-converted-space"> </span><a href="http://developer.android.com/guide/topics/data/data-storage.html#pref" target="_blank" rel="external">SharedPreferences</a> ， 下面带来一些Preferences常用的操作，并在最后附上一个项目的Demo片段</span></p>
<p>&nbsp;</p>
<h2 id="1-定义Preferences"><a href="#1-定义Preferences" class="headerlink" title="1.定义Preferences"></a>1.定义Preferences</h2><p>&nbsp;</p>
<p>首先,你应该创建一个以@SharedPref定义的接口，作为一个 SharedPreferences</p>
<p><pre class="lang:java decode:true " title="@SharedPref">@SharedPref<br>public interface MyPrefs {</pre></p>
<pre><code>// The field name will have default value &quot;John&quot;
@DefaultString(&quot;John&quot;)
String name();

// The field age will have default value 42
@DefaultInt(42)
int age();

// The field lastUpdated will have default value 0
long lastUpdated();
</code></pre><p>}<br><span id="tran_0" class="copied" data-aligning="#tran_0,#src_0">基于这个操作, </span><span id="tran_1" class="copied" data-aligning="#tran_1,#src_1">AndroidAnnotations框架将会自动构建一个SharedPreferences子类，在你的原类名基础上</span><span id="tran_2" class="copied" data-aligning="#tran_2,#src_2">加上下划线<em>，如MyPref</em>，</span><span id="tran_3" class="copied" data-aligning="#tran_3,#src_3">你可以通过<span id="tran_6" class="copied" data-aligning="#tran_6,#src_6">@Pref注释</span>得到这个</span><span id="tran_4" class="copied" data-aligning="#tran_4,#src_4">实例</span></p>
<p><strong><span style="font-family: Helvetica;">注意:</span></strong><span class="Apple-converted-space"> 实例的类型必须以新生成的类为类型</span></p>
<p><pre class="lang:java decode:true " title="@Pref">@EActivity<br>public class MyActivity extends Activity {</pre></p>
<pre><code>@Pref
MyPrefs_ myPrefs;

// ...
</code></pre><p>}<br>其中，定义值目前有：</p>
<blockquote>
<p>@DefaultBoolean</p>
<p>@DefaultFloat</p>
<p>@DefaultInt</p>
<p>@DefaultLong</p>
<p>@DefaultString</p>
<p>@DefaultStringSet</p>
<p>@DefaultRes<br>&nbsp;</p>
</blockquote>
<p>&nbsp;</p>
<h2 id="2-使用pref"><a href="#2-使用pref" class="headerlink" title="2.使用pref"></a>2.使用pref</h2><p>&nbsp;</p>
<p><pre class="lang:java decode:true ">// Simple edit<br>myPrefs.name().put(“John”);</pre></p>
<p>// Batch edit<br>myPrefs.edit()<br>  .name()<br>  .put(“John”)<br>  .age()<br>  .put(42)<br>  .apply();</p>
<p>// Preference clearing:<br>myPrefs.clear();</p>
<p>// Check if a value exists:<br>boolean nameExists = myPrefs.name().exists();</p>
<p>// Reading a value<br>long lastUpdated = myPrefs.lastUpdated().get();</p>
<p>// Reading a value and providing a fallback default value<br>long now = System.currentTimeMillis();<br>long lastUpdated = myPrefs.lastUpdated().getOr(now);<br>&nbsp;</p>
<h2 id="3-设置默认值"><a href="#3-设置默认值" class="headerlink" title="3.设置默认值"></a>3.设置默认值</h2><p>&nbsp;</p>
<p>注意： anno 3.0 版本之后才有这个功能</p>
<p><pre class="lang:java decode:true">@SharedPref<br>public interface MyPrefs {<br>    @DefaultInt(0)<br>    int versionCode();</pre></p>
<pre><code>@DefaultString(&quot;无&quot;)
String widgetBackground();

@DefaultBoolean(false)
boolean classTableAsFirstScreen();}&lt;/pre&gt;
</code></pre><p>&nbsp;</p>
<h2 id="4-使用String-资源"><a href="#4-使用String-资源" class="headerlink" title="4.使用String 资源"></a>4.使用String 资源</h2><p>&nbsp;</p>
<p>注意：anno 3.1 后才有此功能</p>
<p><pre class="lang:java decode:true " title="@DefaultString">@SharedPref<br>public interface MyPrefs {<br>    @DefaultString(value = “John”, keyRes = R.string.myPrefKey)<br>    String name();</pre></p>
<pre><code>@DefaultRes
String defaultPrefAge(keyRes = R.string.myOtherPrefKey);
</code></pre><p>}<br>&nbsp;</p>
<h2 id="5-作用域"><a href="#5-作用域" class="headerlink" title="5.作用域"></a>5.作用域</h2><p>&nbsp;</p>
<p>你还可以通过设置value来设定pref的作用域</p>
<p>例如：</p>
<ul>
<li><blockquote>
<p><code>ACTIVITY ：</code>名为：<code>MyActivity_MyPrefs 的pref</code></p>
</blockquote>
</li>
<li><blockquote>
<p><code>ACTIVITY_DEFAULT</code> <span style="font-family: Courier New;">：</span> 名为 <span class="Apple-converted-space"> </span><code>MyActivity 的 pref</code><br>(<span class="Apple-converted-space"> 可以通过 </span><code>activity.getPreferences() 获取到</code>);</p>
</blockquote>
</li>
<li><blockquote>
<p><code>APPLICATION_DEFAULT &lt;span style=&quot;font-family: Courier New;&quot;&gt;：&lt;/span&gt;</code> 使用默认的单例名称<br>&nbsp;</p>
</blockquote>
</li>
</ul>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span id="tran_4" class="copied" data-aligning="#tran_4,#src_4">因此,</span><span id="tran_5" class="copied" data-aligning="#tran_5,#src_5">如果一个<span style="font-size: medium;"><span style="font-family: Consolas;">SharedPreference</span></span></span><span id="tran_7" class="copied" data-aligning="#tran_7,#src_7">接口的定义是给一个应用程序application下所有activity所使用的话，</span><span id="tran_11" class="copied" data-aligning="#tran_11,#src_11">应该使用以下作用域:</span></p>
<p><pre class="lang:java decode:true " title="SharedPref.Scope.UNIQUE">@SharedPref(value=SharedPref.Scope.UNIQUE)<br>public interface MyPrefs {<br>…</pre><br>&nbsp;</p>
<h2 id="6-在PreferenceActivity中使用它"><a href="#6-在PreferenceActivity中使用它" class="headerlink" title="6.在PreferenceActivity中使用它"></a>6.在PreferenceActivity中使用它</h2><p>&nbsp;</p>
<p>同样地，使用 Android<span class="Apple-converted-space"> </span><code>PreferenceActivity</code><span class="Apple-converted-space"> 也</span>能够改写任何已用@SharedPref注解的SharedPref</p>
<p><pre class="lang:java decode:true " title="@SharedPref()">@SharedPref()<br>public interface MyPrefs {<br>…<br>}</pre><br>&nbsp;</p>
<p><pre class="lang:java decode:true " title="PrefsActivity ">public class PrefsActivity extends PreferenceActivity {</pre></p>
<pre><code>public static String PREF_NAME = &quot;MyPrefs&quot;;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

            // Using your MyPrefs values 
    this.getPreferenceManager().setSharedPreferencesName(PREF_NAME);

            // Opening the layout 
    addPreferencesFromResource(R.xml.prefs);
}
</code></pre><p>}<br>&nbsp;</p>
<h2 id="7-实际项目demo片段"><a href="#7-实际项目demo片段" class="headerlink" title="7.实际项目demo片段"></a>7.实际项目demo片段</h2><p>&nbsp;</p>
<p>SharedPref</p>
<p><pre class="lang:java decode:true ">**</pre></p>
<ul>
<li>@Title:应用程序配置文件AppConfig</li>
<li>@Description: 使用SharedPref储存本地数据</li>
<li>@author qsuron</li>
<li>@date 2014-9-23</li>
<li><p>@email admin@qiushurong.cn<br>*/<br>@SharedPref( value = SharedPref.Scope.UNIQUE)<br>public interface AppConfig {</p>
<p> @DefaultInt(0)<br> int versionCode();     // 当前的versionCode</p>
<p> @DefaultString(“”)<br> String userName();     // 用户</p>
<p> @DefaultString(“”)<br> String password();     // 密码<br>}<br>片段1<br><pre class="lang:java decode:true "> config = new cn.scau.scautreasure.AppConfig_(context);</pre></p>
<pre><code>RingerMode duringMode = RingerMode.getModeByValue(config.duringClassRingerMode().get());
RingerMode afterMode = RingerMode.getModeByValue(config.afterClassRingerMode().get());
</code></pre><p><br>片段2<br><pre class="lang:java decode:true">@Pref        cn.scau.scautreasure.AppConfig_  config;</pre></p>
<p>/**</p>
<ul>
<li><p>切换到加载所有课程模式;<br>*/<br>@OptionsItem<br>void menu_load_classtable_all(){<br> config.classTableShowMode().put(MODE_ALL);<br> showClassTable();<br>}</p>
<p>/**</p>
</li>
<li>切换到智能加载课程模式;<br>*/<br>@OptionsItem<br>void menu_load_classtable_with_params(MenuItem item){<br> config.classTableShowMode().put(MODE_PARAMS);<br> showClassTable();<br>}<br>&nbsp;</li>
</ul>
</li>
</ul>
<p>&nbsp;</p>
<p>Edit by 小树</p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/09/22/android-annotations-introduce/" itemprop="url">
                  AndroidAnnotations注解框架之介绍+配置(一)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-09-22T19:28:22+08:00" content="2014-09-22">
              2014-09-22
            </time>
          </span>

<span class="post-count">&nbsp; | &nbsp;字数 2,625</span>
<span class="post-count">&nbsp; | &nbsp;预计阅读 13分钟</span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Android开发/" itemprop="url" rel="index">
                    <span itemprop="name">Android开发</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/09/22/android-annotations-introduce/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/09/22/android-annotations-introduce/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>作为一门开发语言，反射类机制是必不可少的！android也有类似的开源IOC框架，通过依赖注入（IOC）的实现思想，可以把约定好的一大串代码通过注解@的方式，以IOC技术来生成中间件，AndroidAnnotations在这方面出色，不仅体积小，而且功能强大，极大的减少了代码量，下面将带来一系列的教程。<br>&nbsp;</p>
</blockquote>
<p>&nbsp;</p>
<p>希望此篇能帮到大家，本系列教程目录：<span style="color: #ff0000;">转载请链接并注明：转自 <a href="http://www.qiushurong.cn" title="小树技术博客" target="_blank" rel="external">小树技术博客</a> .</span></p>
<blockquote>
<p>AndroidAnnotations注解框架之介绍+配置(一)：<a href="http://www.qiushurong.cn/2014/09/22/android-annotations-introduce/" title="AndroidAnnotations注解框架之介绍+配置(一)" target="_blank" rel="external">飞机直达</a></p>
<p>AndroidAnnotations注解框架之@Pref(二)： <a href="http://www.qiushurong.cn/2014/09/23/android-annotations-pref/" title="AndroidAnnotations注解框架之@Pref(二)" target="_blank" rel="external">飞机直达</a></p>
<p>AndroidAnnotations注解框架之@Activity(三)：<a href="http://www.qiushurong.cn/2014/10/03/android-annotations-activity/" title="AndroidAnnotations注解框架之@Activity(三)" target="_blank" rel="external">飞机直达</a></p>
<p>AndroidAnnotations注解框架之@Application(四)： <a href="http://www.qiushurong.cn/2014/10/03/android-annotations-application/" title="AndroidAnnotations注解框架之@Application(四)" target="_blank" rel="external">飞机直达</a><br>&nbsp;</p>
</blockquote>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h1 id="一-Android-Annotations-的介绍"><a href="#一-Android-Annotations-的介绍" class="headerlink" title="一 Android Annotations 的介绍"></a>一 Android Annotations 的介绍</h1><p>&nbsp;</p>
<p>AndroidAnnotations官网：<a href="http://androidannotations.org/" target="_blank" rel="external">AndroidAnnotations首页</a></p>
<p>开源于github的项目地址：<a href="https://github.com/excilys/androidannotations/wiki" target="_blank" rel="external">AndroidAnnotations Github</a></p>
<p>AndroidAnnotations是一个能够让你快速进行Android开发的开源框架，它能让你专注于真正重要的地方。使代码更加精简，使项目更加容易维护，它的目标就是“Fast Android Development.Easy maintainance”.通过一段时间的使用发现，相比原生的Android开发，确实能够让你少些很多代码，它的首页也给出了一个简单的例子,通过例子也可以看到代码比之前几乎少写了一半。由于是开源，所以大家都可以直接拿来使用。</p>
<p><span style="color: #3366ff;">至于使用这个开源框架有什么好处（只有不到50k大小），我这里就不详细翻译github上的介绍了，就简单说一下特性：</span></p>
<blockquote>
<p>1、使用依赖注入（Dependency Injection）#本博接来下几篇的文章将要介绍的开源组件都使用DI, 不熟悉的可以了解一下Inversion of Control（IoC）</p>
<p>2、简化的线程模型（Simplified  threading model)</p>
<p>3、事件绑定（Event binding）</p>
<p>4、REST Client</p>
<p>5、No Magic  [不知道为什么这样称呼，直译过来就是：无魔法，它的意思是：AndroidAnnotations在编译的时候会产生一个子类(接下来你会明白)，你查看这个子类，可以看到它是如何工作的]<br>&nbsp;</p>
</blockquote>
<p>更多的介绍可以前往官网或者Github上的项目去查看，它带有超级详细和全面的wiki，CookBook和API文档，十分爽心悦目。</p>
<p>&nbsp;</p>
<h1 id="二-Android-Annotations-的部署"><a href="#二-Android-Annotations-的部署" class="headerlink" title="二 Android Annotations 的部署"></a>二 Android Annotations 的部署</h1><p>&nbsp;</p>
<h2 id="一-环境："><a href="#一-环境：" class="headerlink" title="(一) 环境："></a>(一) 环境：</h2><p>&nbsp;</p>
<blockquote>
<p>开发工具：Eclipse &amp; android stdio &amp; other （本篇以eclipse为例子，其他IDE请参考官网）</p>
<p>JDK版本：jdk1.6 以上</p>
<p>构建工具：Ant（Eclipse默认的build tool，因此无需装额外的插件）</p>
<p>androidannotations：3.1 (请前往 <a href="https://github.com/excilys/androidannotations/releases" title="androidannotation" target="_blank" rel="external">发行地址</a> 下载)</p>
</blockquote>
<h2 id="二-步骤："><a href="#二-步骤：" class="headerlink" title="(二) 步骤："></a>(二) 步骤：</h2><p>&nbsp;</p>
<blockquote>
<p>1，准备好需要的环境，见上文</p>
<p>2，配置好项目文件</p>
<p>3，配置Ant</p>
<p>4，配置Eclipse<br>&nbsp;</p>
</blockquote>
<h2 id="1-新建项目配置JAR包"><a href="#1-新建项目配置JAR包" class="headerlink" title="1. 新建项目配置JAR包"></a>1. 新建项目配置JAR包</h2><p>&nbsp;</p>
<p>首先需要有一个普通的android项目，下载并解压Anno 3.1的JAR包，解压后有两个jar包，androidannotations-api-2.7.1.jar放置于项目libs文件夹，androidannotations-2.7.1.jar放置于项目compile-libs文件夹下</p>
<p><span style="color: #3366ff;">（compile-libs需要自己创建，创建在项目的根目录下）</span></p>
<p>&nbsp;</p>
<h2 id="2-创建配置文件"><a href="#2-创建配置文件" class="headerlink" title="2.  创建配置文件"></a>2.  创建配置文件</h2><p>&nbsp;</p>
<p>（在项目根目录下，创建  build.xml和custom_rules.xml）</p>
<p>&nbsp;</p>
<h3 id="创建build-xml，内容如下：（注意修改项目名，其他不变，C-V即可）"><a href="#创建build-xml，内容如下：（注意修改项目名，其他不变，C-V即可）" class="headerlink" title="创建build.xml，内容如下：（注意修改项目名，其他不变，C+V即可）"></a>创建build.xml，内容如下：<span style="color: #3366ff;">（注意修改项目名，其他不变，C+V即可）</span></h3><p>&nbsp;</p>
<p><pre class="lang:java decode:true " title="build.xml">&lt;?xml version=”1.0” encoding=”UTF-8”?&gt;<br>&lt;project name=”这里是项目名” default=”help”&gt;</pre></p>
<pre><code>&amp;lt;property file=&quot;local.properties&quot; /&amp;gt;

&amp;lt;property file=&quot;ant.properties&quot; /&amp;gt;

&amp;lt;property environment=&quot;env&quot; /&amp;gt;
&amp;lt;condition property=&quot;sdk.dir&quot; value=&quot;${env.ANDROID_HOME}&quot;&amp;gt;
    &amp;lt;isset property=&quot;env.ANDROID_HOME&quot; /&amp;gt;
&amp;lt;/condition&amp;gt;

&amp;lt;loadproperties srcFile=&quot;project.properties&quot; /&amp;gt;

&amp;lt;fail
        message=&quot;sdk.dir is missing. Make sure to generate local.properties using &apos;android update project&apos; or to inject it through the ANDROID_HOME environment variable.&quot;
        unless=&quot;sdk.dir&quot;
/&amp;gt;

&amp;lt;import file=&quot;custom_rules.xml&quot; optional=&quot;true&quot; /&amp;gt;
&amp;lt;import file=&quot;${sdk.dir}/tools/ant/build.xml&quot; /&amp;gt;
</code></pre><p>&lt;/project&gt;<br><br>&nbsp;</p>
<h3 id="创建-custom-rules-xml，内容如下：C-V即可"><a href="#创建-custom-rules-xml，内容如下：C-V即可" class="headerlink" title="创建 custom_rules.xml，内容如下：C+V即可"></a>创建 custom_rules.xml，内容如下：C+V即可</h3><p>&nbsp;</p>
<p><pre class="lang:java decode:true " title="custom_rules.xml">&lt;?xml version=”1.0” encoding=”UTF-8”?&gt;<br>&lt;property<br>    name=”generated.dir”<br>    value=”.apt_generated” /&gt;<br>&lt;property<br>    name=”generated.absolute.dir”<br>    location=”${generated.dir}” /&gt;<br>&lt;property<br>    name=”java.compilerargs”<br>    value=”-s &amp;apos;${generated.absolute.dir}&amp;apos;” /&gt;<br>&lt;target name=”-pre-compile” &gt;</pre></p>
<pre><code>&amp;lt;mkdir dir=&quot;${generated.absolute.dir}&quot; /&amp;gt;
</code></pre><p>&lt;/target&gt;&lt;target<br>    name=”-compile”<br>    depends=”-pre-build, -build-setup, -code-gen, -pre-compile” &gt;</p>
<pre><code>&amp;lt;do-only-if-manifest-hasCode elseText=&quot;hasCode = false. Skipping...&quot; &amp;gt;

    &amp;lt;!-- merge the project&apos;s own classpath and the tested project&apos;s classpath --&amp;gt;

    &amp;lt;path id=&quot;project.javac.classpath&quot; &amp;gt;

        &amp;lt;path refid=&quot;project.all.jars.path&quot; /&amp;gt;

        &amp;lt;path refid=&quot;tested.project.classpath&quot; /&amp;gt;

        &amp;lt;path path=&quot;${java.compiler.classpath}&quot; /&amp;gt;

        &amp;lt;fileset
            dir=&quot;compile-libs&quot;
            includes=&quot;*.jar&quot; /&amp;gt;
    &amp;lt;/path&amp;gt;

    &amp;lt;javac
        bootclasspathref=&quot;project.target.class.path&quot;
        classpathref=&quot;project.javac.classpath&quot;
        debug=&quot;true&quot;
        destdir=&quot;${out.classes.absolute.dir}&quot;
        encoding=&quot;${java.encoding}&quot;
        extdirs=&quot;&quot;
        fork=&quot;${need.javac.fork}&quot;
        includeantruntime=&quot;false&quot;
        source=&quot;${java.source}&quot;
        target=&quot;${java.target}&quot;
        verbose=&quot;${verbose}&quot; &amp;gt;

        &amp;lt;src path=&quot;${source.absolute.dir}&quot; /&amp;gt;

        &amp;lt;src path=&quot;${gen.absolute.dir}&quot; /&amp;gt;

        &amp;lt;compilerarg line=&quot;${java.compilerargs}&quot; /&amp;gt;
    &amp;lt;/javac&amp;gt;

    &amp;lt;!-- if the project is instrumented, intrument the classes --&amp;gt;

    &amp;lt;if condition=&quot;${build.is.instrumented}&quot; &amp;gt;

        &amp;lt;then&amp;gt;

            &amp;lt;echo level=&quot;info&quot; &amp;gt;
</code></pre><p>Instrumenting classes from ${out.absolute.dir}/classes…</p>
<pre><code>        &amp;lt;/echo&amp;gt;

        &amp;lt;!-- build the filter to remove R, Manifest, BuildConfig --&amp;gt;

        &amp;lt;getemmafilter
            appPackage=&quot;${project.app.package}&quot;
            filterOut=&quot;emma.default.filter&quot;
            libraryPackagesRefId=&quot;project.library.packages&quot; /&amp;gt;

        &amp;lt;!--
                 define where the .em file is going. This may have been
                 setup already if this is a library

        --&amp;gt;

        &amp;lt;property
            name=&quot;emma.coverage.absolute.file&quot;
            location=&quot;${out.absolute.dir}/coverage.em&quot; /&amp;gt;

        &amp;lt;!-- It only instruments class files, not any external libs --&amp;gt;

        &amp;lt;emma enabled=&quot;true&quot; &amp;gt;

            &amp;lt;instr
                instrpath=&quot;${out.absolute.dir}/classes&quot;
                metadatafile=&quot;${emma.coverage.absolute.file}&quot;
                mode=&quot;overwrite&quot;
                outdir=&quot;${out.absolute.dir}/classes&quot;
                verbosity=&quot;${verbosity}&quot; &amp;gt;

                &amp;lt;filter excludes=&quot;${emma.default.filter}&quot; /&amp;gt;

                &amp;lt;filter value=&quot;${emma.filter}&quot; /&amp;gt;
            &amp;lt;/instr&amp;gt;
        &amp;lt;/emma&amp;gt;
    &amp;lt;/then&amp;gt;
&amp;lt;/if&amp;gt;

&amp;lt;!-- if the project is a library then we generate a jar file --&amp;gt;

&amp;lt;if condition=&quot;${project.is.library}&quot; &amp;gt;

    &amp;lt;then&amp;gt;

        &amp;lt;echo level=&quot;info&quot; &amp;gt;
</code></pre><p>Creating library output jar file…</p>
<pre><code>&amp;lt;/echo&amp;gt;

&amp;lt;property
    name=&quot;out.library.jar.file&quot;
    location=&quot;${out.absolute.dir}/classes.jar&quot; /&amp;gt;

&amp;lt;if&amp;gt;

    &amp;lt;condition&amp;gt;

        &amp;lt;length
            length=&quot;0&quot;
            string=&quot;${android.package.excludes}&quot;
            trim=&quot;true&quot;
            when=&quot;greater&quot; /&amp;gt;
    &amp;lt;/condition&amp;gt;

    &amp;lt;then&amp;gt;

        &amp;lt;echo level=&quot;info&quot; &amp;gt;
</code></pre><p>Custom jar packaging exclusion: ${android.package.excludes}</p>
<pre><code>                    &amp;lt;/echo&amp;gt;
                &amp;lt;/then&amp;gt;
            &amp;lt;/if&amp;gt;

            &amp;lt;propertybyreplace
                name=&quot;project.app.package.path&quot;
                input=&quot;${project.app.package}&quot;
                replace=&quot;.&quot;
                with=&quot;/&quot; /&amp;gt;

            &amp;lt;jar destfile=&quot;${out.library.jar.file}&quot; &amp;gt;

                &amp;lt;fileset
                    dir=&quot;${out.classes.absolute.dir}&quot;
                    excludes=&quot;${project.app.package.path}/R.class ${project.app.package.path}/R$*.class ${project.app.package.path}/BuildConfig.class&quot;
                    includes=&quot;**/*.class&quot; /&amp;gt;

                &amp;lt;fileset
                    dir=&quot;${source.absolute.dir}&quot;
                    excludes=&quot;**/*.java ${android.package.excludes}&quot; /&amp;gt;
            &amp;lt;/jar&amp;gt;
        &amp;lt;/then&amp;gt;
    &amp;lt;/if&amp;gt;
&amp;lt;/do-only-if-manifest-hasCode&amp;gt;
</code></pre><p>&lt;/target&gt;<br>&nbsp;</p>
<h2 id="3-配置eclipse"><a href="#3-配置eclipse" class="headerlink" title="3.  配置eclipse"></a>3.  配置eclipse</h2><p>&nbsp;</p>
<p>在eclipse中，右键项目，选择属性Properties</p>
<p>Properties&gt;&gt; Java Compiler ,勾上Enable，确保编译器版本为1.6以上</p>
<p>Properties &gt;&gt; Java Compiler &gt;&gt; Annotation Processing &gt;&gt; 勾选Enable annotation processing(开启)</p>
<p>Properties &gt;&gt; Java Compiler &gt;&gt; Annotation Processing &gt;&gt; Factory Path &gt;&gt; 添加jar包，选择该项目，打开compile-libs目录下的androidannotations-2.7.1.jar</p>
<p>&nbsp;</p>
<h2 id="4-重新编译项目"><a href="#4-重新编译项目" class="headerlink" title="4,重新编译项目"></a>4,重新编译项目</h2><p>&nbsp;</p>
<p>选择eclipse菜单，Project&gt;&gt;clean&gt;&gt;选上该项目&gt;&gt;确定clean</p>
<p>&nbsp;</p>
<h2 id="5-至此，AndroidAnnotations配置完成"><a href="#5-至此，AndroidAnnotations配置完成" class="headerlink" title="5,至此，AndroidAnnotations配置完成"></a>5,至此，AndroidAnnotations配置完成</h2><p>&nbsp;</p>
<p>这里附上一个简单的Demo，可以导入后，继续Ant和eclipse的配置即可正常使用，如有问题，请留言。</p>
<p><a href="http://www.qiushurong.cn/wp-content/uploads/2014/09/TestAA.zip" target="_blank" rel="external">AndroidAnnotationsDemo</a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/09/22/android-application/" itemprop="url">
                  Android真正的入口：Application的用法介绍
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-09-22T16:09:59+08:00" content="2014-09-22">
              2014-09-22
            </time>
          </span>

<span class="post-count">&nbsp; | &nbsp;字数 2,006</span>
<span class="post-count">&nbsp; | &nbsp;预计阅读 9分钟</span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Android开发/" itemprop="url" rel="index">
                    <span itemprop="name">Android开发</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/09/22/android-application/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/09/22/android-application/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>注：文章部分内容转载自renqingping(博客园)<br>Android使用Google <wbr>Dalvik <wbr>VM，相对于传统Java <wbr>VM而言有着很大的不同，在Sun的Java体系中入口点和标准c语言一样是main()，而每个Android程序都包含着一个Application实例，一个Application实例中有多个Activity、Service、ContentProvider或Broadcast <wbr>Receiver。因为大部分的应用都包含Activity所以，说很多网友认为是Activity的onCreate，但是你没有发现你的工程中有多个Activity吗? <wbr>你可能没有见过没有Activity的Android应用吧。</p>
</blockquote>
<p><span style="color: #3366ff;">其实在android.app.Application这个包的onCreate才是真正的Android入口点，只不过大多数开发者无需重写该类，他的继承关系如下图：</span></p>
<p><span style="color: #3366ff;">java.lang.Object</span></p>
<p><span style="color: #3366ff;"> <wbr> <wbr> <wbr>↳ <wbr>android.content.Context</span></p>
<p><span style="color: #3366ff;"> <wbr> <wbr> <wbr> <wbr> <wbr>↳ <wbr>android.content.ContextWrapper</span></p>
<p><span style="color: #3366ff;"> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>↳ <wbr>android.app.Application</span></p>
<p> <wbr></p>
<p>android.app.Application类包含了4个公开的方法</p>
<p><pre class="lang:java decode:true ">void  onConfigurationChanged(Configuration newConfig)<br>void  onCreate()  //这里才是真正的入口点。<br>void  onLowMemory()<br>void  onTerminate()</pre><br><span style="color: #3366ff;">所以希望大家，记住真正的Android入口点是application的onCreate，不过通过源代码可以看出，application的onCreate函数什么事也没有做。你可以看下androidmanifest.xml的包含关系就清楚了，并不是每个应用都必须有Activity的。</span></p>
<p>&nbsp;</p>
<h1 id="Application-类"><a href="#Application-类" class="headerlink" title="Application**类**"></a><strong>Application**</strong>类**</h1><p>&nbsp;</p>
<p>Application和Activity,Service一样是Android框架的一个系统组件，当Android程序启动时系统会创建一个Application对象，用来存储系统的一些信息。</p>
<blockquote>
<p>Android系统自动会为每个程序运行时创建一个Application类的对象且只创建一个，所以Application可以说是单例（singleton）模式的一个类。</p>
<p>通常我们是不需要指定一个Application的，系统会自动帮我们创建，如果需要创建自己的Application，那也很简单！创建一个类继承Application并在AndroidManifest.xml文件中的application标签中进行注册（只需要给application标签增加name属性，并添加自己的 Application的名字即可）。</p>
<p>启动Application时，系统会创建一个PID，即进程ID，所有的Activity都会在此进程上运行。那么我们在Application创建的时候初始化全局变量，同一个应用的所有Activity都可以取到这些全局变量的值，换句话说，我们在某一个Activity中改变了这些全局变量的值，那么在同一个应用的其他Activity中值就会改变。</p>
<p>Application对象的生命周期是整个程序中最长的，它的生命周期就等于这个程序的生命周期。因为它是全局的单例的，所以在不同的Activity,Service中获得的对象都是同一个对象。所以可以通过Application来进行一些，如：数据传递、数据共享和数据缓存等操作。</p>
</blockquote>
<h2 id="1，应用场景："><a href="#1，应用场景：" class="headerlink" title="1，应用场景："></a><strong>1，应用场景：</strong></h2><p>&nbsp;</p>
<p>在Android中，可以通过继承Application类来实现应用程序级的全局变量，这种全局变量方法相对静态类更有保障，直到应用的所有Activity全部被destory掉之后才会被释放掉。</p>
<h2 id="2，实现步骤："><a href="#2，实现步骤：" class="headerlink" title="2，实现步骤："></a><strong>2，实现步骤：</strong></h2><p>&nbsp;</p>
<h3 id="1-、继承-Application"><a href="#1-、继承-Application" class="headerlink" title="1**、继承**Application"></a><strong>1**</strong>、继承<strong>**Application</strong></h3><p>&nbsp;</p>
<p><pre class="lang:java decode:true ">public class CustomApplication extends Application<br>{<br>    private static final String VALUE = “Harvey”;</pre></p>
<pre><code>private String value;

@Override
public void onCreate()
{
    super.onCreate();
    setValue(VALUE); // 初始化全局变量
}

public void setValue(String value)
{
    this.value = value;
}

public String getValue()
{
    return value;
}
</code></pre><p>}<br>&nbsp;</p>
<p><span style="color: #3366ff;"><strong>注：继承**</strong>Application<strong><strong>类，主要重写里面的</strong></strong>onCreate<strong><strong>（）方法（</strong></strong>android.app.Application<strong><strong>包的</strong></strong>onCreate<strong><strong>（）才是真正的</strong></strong>Android<strong>**程序的入口点），就是创建的时候，初始化变量的值。然后在整个应用中的各个文件中就可以对该变量进行操作了。</strong></span></p>
<h3 id="2-、在ApplicationManifest-xml文件中配置自定义的-Application"><a href="#2-、在ApplicationManifest-xml文件中配置自定义的-Application" class="headerlink" title="2**、在ApplicationManifest.xml文件中配置自定义的**Application"></a><strong>2**</strong>、在<strong><strong>ApplicationManifest.xml</strong></strong>文件中配置自定义的<strong>**Application</strong></h3><p>&nbsp;</p>
<p><pre class="lang:java decode:true ">&lt;application<br>        android:name=”CustomApplication”&gt;<br>&lt;/application&gt;</pre><br>&nbsp;</p>
<p><strong>实例代码：</strong></p>
<h4 id="CustomApplication-java"><a href="#CustomApplication-java" class="headerlink" title="CustomApplication.java"></a><strong>CustomApplication.java</strong></h4><p>&nbsp;</p>
<p><pre class="lang:java decode:true ">/**</pre></p>
<ul>
<li>继承Application</li>
<li></li>
<li>@author admin</li>
<li><p>*/<br>public class CustomApplication extends Application<br>{<br> private static final String VALUE = “Harvey”;</p>
<p> private String value;</p>
<p> @Override<br> public void onCreate()<br> {</p>
<pre><code>super.onCreate();
setValue(VALUE); // 初始化全局变量
</code></pre><p> }</p>
<p> public void setValue(String value)<br> {</p>
<pre><code>this.value = value;
</code></pre><p> }</p>
<p> public String getValue()<br> {</p>
<pre><code>return value;
</code></pre><p> }<br>}<br>&nbsp;</p>
</li>
</ul>
<h4 id="FirstActivity-java"><a href="#FirstActivity-java" class="headerlink" title="FirstActivity.java"></a><strong>FirstActivity.java</strong></h4><p>&nbsp;</p>
<p><pre class="lang:java decode:true ">public class FirstActivity extends Activity<br>{<br>    private CustomApplication app;</pre></p>
<pre><code>@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    app = (CustomApplication) getApplication(); // 获得CustomApplication对象

    Log.i(&quot;FirstActivity&quot;, &quot;初始值=====&quot; + app.getValue()); // 获取进程中的全局变量值，看是否是初始化值

    app.setValue(&quot;Harvey Ren&quot;); // 重新设置值

    Log.i(&quot;FirstActivity&quot;, &quot;修改后=====&quot; + app.getValue()); // 再次获取进程中的全局变量值，看是否被修改

    Intent intent = new Intent();
    intent.setClass(this, SecondActivity.class);
    startActivity(intent);
}
</code></pre><p>}<br>&nbsp;</p>
<p><strong>注：只需要调用**</strong>Context<strong><strong>的</strong></strong> getApplicationContext<strong><strong>或者</strong></strong>Activity<strong><strong>的</strong></strong>getApplication<strong><strong>方法来获得一个</strong></strong>Application<strong><strong>对象，然后再得到相应的成员变量即可。</strong></strong>它是代表我们的应用程序的类，使用它可以获得当前应用的主题和资源文件中的内容等，这个类更灵活的一个特性就是可以被我们继承，来添加我们自己的全局属性。**</p>
<h4 id="SecondActivity-java"><a href="#SecondActivity-java" class="headerlink" title="SecondActivity.java"></a><strong>SecondActivity.java</strong></h4><p>&nbsp;</p>
<p><pre class="lang:java decode:true ">public class SecondActivity extends Activity<br>{<br>    private CustomApplication app;</pre></p>
<pre><code>@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    app = (CustomApplication) getApplication(); // 获取应用程序

   Log.i(&quot;SecondActivity&quot;, &quot;当前值=====&quot; + app.getValue()); // 获取全局值
}
</code></pre><p>}<br>&nbsp;</p>
<h4 id="AndroidManifest-xml"><a href="#AndroidManifest-xml" class="headerlink" title="AndroidManifest.xml"></a><strong>AndroidManifest.xml</strong></h4><p>&nbsp;</p>
<p><pre class="lang:java decode:true ">&lt;?xml version=”1.0” encoding=”utf-8”?&gt;<br>&lt;manifest<br>    xmlns:android=”<a href="http://schemas.android.com/apk/res/android" target="_blank" rel="external">http://schemas.android.com/apk/res/android</a>“<br>    package=”com.android.test”<br>    android:versionCode=”1”<br>    android:versionName=”1.0”&gt;<br>    &lt;uses-sdk<br>        android:minSdkVersion=”8” /&gt;</pre></p>
<pre><code>&amp;lt;application
    android:icon=&quot;@drawable/icon&quot;
    android:label=&quot;@string/app_name&quot;
    android:name=&quot;CustomApplication&quot;&amp;gt;
    &amp;lt;!-- 将我们以前一直用的默认Application设置成自定义的CustomApplication --&amp;gt;
    &amp;lt;activity
        android:name=&quot;.FirstActivity&quot;
        android:label=&quot;@string/app_name&quot;&amp;gt;
        &amp;lt;intent-filter&amp;gt;
            &amp;lt;action
                android:name=&quot;android.intent.action.MAIN&quot; /&amp;gt;
            &amp;lt;category
                android:name=&quot;android.intent.category.LAUNCHER&quot; /&amp;gt;
        &amp;lt;/intent-filter&amp;gt;
    &amp;lt;/activity&amp;gt;

    &amp;lt;activity
        android:name=&quot;.SecondActivity&quot;
        android:label=&quot;@string/app_name&quot;&amp;gt;
    &amp;lt;/activity&amp;gt;
&amp;lt;/application&amp;gt;
</code></pre><p>&lt;/manifest&gt;<br>&nbsp;</p>
<p>注：<br><span style="color: #3366ff;">在某些情况下可能会遇到getApplication返回null的情况，有可能是调用getApplication的时机不对，如果是在类未定义完成的地方（比如变量定义部分），此时无法得到实例，所以就会出现空指针</span></p>
<p>&nbsp;</p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/09/17/ibm-jts-qm-import/" itemprop="url">
                  IBM-JazzTeamServer-rqm中EXCEL测试用例的导入
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-09-17T15:40:52+08:00" content="2014-09-17">
              2014-09-17
            </time>
          </span>

<span class="post-count">&nbsp; | &nbsp;字数 2,075</span>
<span class="post-count">&nbsp; | &nbsp;预计阅读 10分钟</span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/软件测试/" itemprop="url" rel="index">
                    <span itemprop="name">软件测试</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/09/17/ibm-jts-qm-import/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/09/17/ibm-jts-qm-import/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="IBM-JTS-RQM中EXCEL测试用例的导入"><a href="#IBM-JTS-RQM中EXCEL测试用例的导入" class="headerlink" title="IBM JTS RQM中EXCEL测试用例的导入"></a>IBM JTS RQM中EXCEL测试用例的导入</h1><p>&nbsp;</p>
<blockquote>
<p>在IBM公司的软件管理平台JTS上，从EXCEL文件导入测试用例到RQM中是十分之重要和实用的，很多客户也是要求必须要有如此的功能，本篇文档主要是一个工具的指南，因为RQM本身并不可以导入EXCEL，但是IBM公司提供了这么一个工具：RQMExcelWordImporter，that’s Amazing!本文内容大部分参考IBM官网的帮助，写得可能不好，请见谅！<br>本文档版本：4.0，和5.0应该差不多</p>
</blockquote>
<p>实际基于质量管理平台：IBM JazzTeamServer Rational Quality Manager 5.0</p>
<p>修订人：小树 admin@qiushurong.cn # 2014-09-17 @guangzhou Changeman</p>
<h1 id="1-需要用到的工具："><a href="#1-需要用到的工具：" class="headerlink" title="1.   需要用到的工具："></a>1.   需要用到的工具：</h1><p>&nbsp;</p>
<p>RQM-Extras-RQMExcelWordImporter</p>
<h2 id="1-1-下载地址："><a href="#1-1-下载地址：" class="headerlink" title="1.1.  下载地址："></a>1.1.  下载地址：</h2><p>&nbsp;</p>
<p><a href="https://jazz.net" target="_blank" rel="external">https://jazz.net</a></p>
<h2 id="1-2-下载步骤："><a href="#1-2-下载步骤：" class="headerlink" title="1.2.  下载步骤："></a>1.2.  下载步骤：</h2><p>&nbsp;</p>
<p>打开网页后，点击download，选择qm，点击all download，找到RQM-Extras-RQMExcelWordImporter，需要登录，没有用户的话需要注册，登录后进行下载。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h1 id="2-工具的使用："><a href="#2-工具的使用：" class="headerlink" title="2.   工具的使用："></a>2.   工具的使用：</h1><p>&nbsp;</p>
<p><a href="http://www.ibm.com/developerworks/cn/rational/1312_zhangjin_rqmbestpractice/" target="_blank" rel="external">http://www.ibm.com/developerworks/cn/rational/1312_zhangjin_rqmbestpractice/</a></p>
<h2 id="2-1-安装并打开importer"><a href="#2-1-安装并打开importer" class="headerlink" title="2.1.  安装并打开importer"></a>2.1.  安装并打开importer</h2><p>注意：</p>
<blockquote>
<p>安装需要MicroSoft office 2003 sp3 以上版本，推荐2003或2007.</p>
<p>安装需要.net FramWork 2.0.以上支持.</p>
<p>由于修改了office的菜单和加载项，所以需要杀毒软件的放行.<br>下载 RQM-Extras-RQMExcelWordImporter-5.0.zip，解压后执行RQMExcelImporterX64setup.exe</p>
</blockquote>
<p>安装完成后，启动 Excel，可以看到在 Add-Ins（加载项） 下的 RQM 项。</p>
<p><a href="http://www.qiushurong.cn/wp-content/uploads/2014/09/jts-rqm-5.jpg" target="_blank" rel="external"><img src="http://www.qiushurong.cn/wp-content/uploads/2014/09/jts-rqm-5.jpg" alt="jts-rqm-5"></a></p>
<blockquote>
<p>注意：如果你是X64系统，请使用X64的安装包，如果使用X64的安装包后发现并没有找到这个选项，请直接使用默认安装包即可。（因为有可能你的系统虽然是64位的，但是你的office软件确实X86或者说是32位的）<br>&nbsp;</p>
</blockquote>
<p>在 RQM 下，选择 Export to Repository，可以看到如图 10 所示窗口：</p>
<p><a href="http://www.qiushurong.cn/wp-content/uploads/2014/09/jts-rqm-1.jpg" target="_blank" rel="external"><img src="http://www.qiushurong.cn/wp-content/uploads/2014/09/jts-rqm-1-279x300.jpg" alt="jts-rqm-1"></a></p>
<p>图 10. Export to RQM</p>
<p>&nbsp;</p>
<h2 id="2-2-连接到RQM"><a href="#2-2-连接到RQM" class="headerlink" title="2.2.  连接到RQM"></a>2.2.  连接到RQM</h2><p>&nbsp;</p>
<p>输入 RQM Server, Username, Password，连接好 RQM Server 之后，选择 Project。这里需要注意的是使用 RQM Excel Importer 连接 RQM 的用户必须有 Data Migration 的角色，如图 11 所示：</p>
<p><a href="http://www.qiushurong.cn/wp-content/uploads/2014/09/jts-rqm-2.jpg" target="_blank" rel="external"><img src="http://www.qiushurong.cn/wp-content/uploads/2014/09/jts-rqm-2-300x243.jpg" alt="jts-rqm-2"></a></p>
<p>图 11. RQM Excel Importer 用户所需要的角色</p>
<p>&nbsp;</p>
<h2 id="2-3-测试用例配置文件"><a href="#2-3-测试用例配置文件" class="headerlink" title="2.3.  测试用例配置文件"></a>2.3.  测试用例配置文件</h2><p>&nbsp;</p>
<p>如图 10 中所示，导入 Test Cases 时我们需要一个配置文件（TestCases.cfg）。在这个文件中我们会配置在 Excel 中的行和列对应到 Test Cases 的各个组成部分，配置文件如清单 5 所示：</p>
<p>&nbsp;</p>
<h3 id="2-3-1-Test-Case配置文件"><a href="#2-3-1-Test-Case配置文件" class="headerlink" title="2.3.1.   Test Case配置文件"></a>2.3.1.   Test Case配置文件</h3><p>&nbsp;</p>
<p><pre class="lang:java decode:true " title="cfg">testcase.XLSStartRow=2<br>testcase.dc:title=B<br>testcase.dc:description=E<br>testcase.jzalm:owner=C<br>testcase.Section(“myns:com.ibm.rqm.planning.editor.section.testCaseDesign”,\”RQM-KEY-TC-DESIGN-TITLE”)=F<br>testcase.Section(“myns:com.ibm.rqm.planning.editor.section.testCasePreCondition”,\”RQM-KEY-TC-PRE-COND-TITLE”)=K</pre><br>&nbsp;</p>
<p>&nbsp;</p>
<h3 id="2-3-2-Test-Case-配置文件的解析"><a href="#2-3-2-Test-Case-配置文件的解析" class="headerlink" title="2.3.2.   Test Case 配置文件的解析"></a>2.3.2.   Test Case 配置文件的解析</h3><p>&nbsp;</p>
<p>在清单 5 中，</p>
<p>第一行表示导入到 RQM 中的 test case 是从 Excel 文档中的第2行开始。</p>
<p>第二行表示 test case 的 title 对应的是 Excel 文件中的 B 列。</p>
<p>第三行表示 test case 的 description 对应的是 Excel 文件中的 E 列。</p>
<p>第四行表示 test case 的 owner 对应的是 Excel 文件中的 C 列。</p>
<p>第五行分别表示 test case 的 Design 对应的是Excel 文件中的 F 列。</p>
<p>第六行分别表示 test case 的 Precondition 对应的是Excel 文件中的和 K 列。</p>
<p>&nbsp;</p>
<p><pre class="lang:java decode:true" title="自己编写的测试用例模版cfg">//业务域<br>testcase.category term=”业务域”.value=”01 登记”<br>//模块<br>testcase.category term=”模块”.value=”011001_设立税务登记”<br>//指定工作表<br>testcase.XLSWorksheetID=”测试用例汇总”<br>//从第*行开始读取<br>testcase.XLSStartRow=2<br>//测试用例-B<br>testcase.customAttributes identifier=”js_attr_csylbh2”.name=B1.type=”SMALL_STRING”.value=B<br>//测试用例-标题C<br>testcase.dc:title=C<br>//测试用例-优先级D<br>testcase.priority=D<br>//测试用例-前置条件E<br>testcase.Section(“myns:js_section_qztj”,”前置条件”)=RichText(E)<br>//测试用例-测试操作步骤及内容F<br>testcase.Section(“myns:js_section_csczbzjnr”,”测试操作步骤及内容”)=RichText(F)<br>//测试用例-关键点G<br>testcase.Section(“myns:js_section_gjd”,”关键点”)=RichText(G)<br>//测试用例-测试数据要求H<br>testcase.Section(“myns:js_section_cssjyq”,”测试数据要求”)=RichText(H)<br>//测试用例-关键点预期效果I<br>testcase.Section(“myns:js_section_gjdyqxg”,”关键点预期效果”)=RichText(I)<br>//测试用例-用例预期效果J<br>testcase.Section(“myns:js_section_ylyqxg”,”用例预期效果”)=RichText(J)<br>//测试用例-关联流程测试用例编号K<br>testcase.customAttributes identifier=”js_attr_gllccsylbh2”.name=K1.value=RichText(K)<br>//测试用例-编写人L<br>testcase.customAttributes identifier=”js_attr_bxr2”.name=L1.type=”SMALL_STRING”.value=L<br>//测试用例-审核意见M<br>testcase.customAttributes identifier=”js_attr_shyj2”.name=M1.type=”SMALL_STRING”.value=M<br>//测试用例-审核人N<br>testcase.customAttributes identifier=”js_attr_shr2”.name=N1.type=”SMALL_STRING”.value=N<br>//测试用例-备注O<br>testcase.Section(“myns:js_section_bz”,”备注”)=RichText(O)<br>//测试用例-所有者<br>testcase.alm:owner=”jazzadmin”<br>//测试用例-权重<br>testcase.weight=”100”</pre></p>
<p><br>&nbsp;</p>
<h2 id="2-4-具体的Excel"><a href="#2-4-具体的Excel" class="headerlink" title="2.4.  具体的Excel"></a>2.4.  具体的Excel</h2><p>&nbsp;</p>
<p><a href="http://www.qiushurong.cn/wp-content/uploads/2014/09/jts-rqm-3.jpg" target="_blank" rel="external"><img src="http://www.qiushurong.cn/wp-content/uploads/2014/09/jts-rqm-3-300x62.jpg" alt="jts-rqm-3"></a></p>
<h2 id="2-5-导入成功"><a href="#2-5-导入成功" class="headerlink" title="2.5.  导入成功"></a>2.5.  导入成功</h2><p>&nbsp;</p>
<p>当 Export To Repoitory 执行成功后，可以在 RQM 查看导入的 Test Cases，如下：</p>
<p><a href="http://www.qiushurong.cn/wp-content/uploads/2014/09/jts-rqm-4.jpg" target="_blank" rel="external"><img src="http://www.qiushurong.cn/wp-content/uploads/2014/09/jts-rqm-4-300x37.jpg" alt="jts-rqm-4"></a></p>
<p>&nbsp;</p>
<h2 id="2-6-总结"><a href="#2-6-总结" class="headerlink" title="2.6.  总结"></a>2.6.  总结</h2><p>&nbsp;</p>
<p>通过上述介绍对比我们可以看到，RQM中，测试用例的导入的重心就是测试用例EXCEL的配置文件。</p>
<p>&nbsp;</p>
<p>附上RQM-importer 的英文官方文档</p>
<p><a href="http://www.qiushurong.cn/wp-content/uploads/2014/09/RQM-importer-doc.pdf" target="_blank" rel="external">RQM-importer-doc</a></p>
<p>附上测试用例导入的例子(国税局测试用例)</p>
<p><a href="http://www.qiushurong.cn/wp-content/uploads/2014/09/testcase导入demo.zip" target="_blank" rel="external">testcase导入demo</a></p>
<p>&nbsp;</p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/08/28/struts-i18n/" itemprop="url">
                  J2EE-网页语言切换之国际化i18n
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-08-28T17:46:45+08:00" content="2014-08-28">
              2014-08-28
            </time>
          </span>

<span class="post-count">&nbsp; | &nbsp;字数 2,447</span>
<span class="post-count">&nbsp; | &nbsp;预计阅读 12分钟</span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Java-EE/" itemprop="url" rel="index">
                    <span itemprop="name">Java EE</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/08/28/struts-i18n/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/08/28/struts-i18n/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>最近在项目中，需要去做一个页面的中英文切换，因此用到了struts自带的国际化 i18n 包，由于我所在的项目是 struts 1.x ，但是网上大多都是 struts 2 因此我把两个都一起记录下来了，基本的操作是一样的。<br><span style="text-transform: none; background-color: #ffffff; text-indent: 28px; display: inline !important; font: 14px/24px arial, 宋体, sans-serif; white-space: normal; float: none; letter-spacing: normal; color: #333333; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><strong>i18n</strong>（<strong>其来源是英文单词 <span style="color: #ff0000;">i</span>nternationalizatio<span style="color: #ff0000;">n</span> 的首末字符i和n，18为中间的字符数</strong>）是“国际化”的简称。在资讯领域，国际化(i18n)指让产品（出版物，软件，硬件等）无需做大的改变就能够适应不同的语言和地区的需要。对程序来说，在不修改内部代码的情况下，能根据不同语言及地区显示相应的界面。 在全球化的时代，国际化尤为重要，因为产品的潜在用户可能来自世界的各个角落。</span></p>
</blockquote>
<h1 id="一，struts-1-x"><a href="#一，struts-1-x" class="headerlink" title="一，struts 1.x"></a>一，struts 1.x</h1><div id="cnblogs_post_body"><br><br>## 1，基本的国际化<br><br>### 步骤1：配置struts国际化<br><br>在struts-config.xml中配置message-resources标签<br><br>&lt;message-resource parameter=”MessageResource”/&gt;<br><br>其中的参数是国际化配置文件MessageResource.properties的文件名。<br><br>### 步骤2：提供国际化配置文件<br><br>中文：MessageResource_zh_cn.properties<br><br>英文：MessageResource_en_us.properties<br><br>源文件：resource.properties表示中文信息<br><br>在源文件resource.properties中硬编码中文信息<br>user.title=用户登录<br>user.username=用户<br>user.password=密码<br>user.button.login=登录<br><br>然后用java中提供的工具把这些信息转换为unicode放到相应国际化文件中。<br><br>MessageResource_zh_cn.properties文件中<br><br>user.title=\u7528\u6237\u767b\u5f55<br>user.username=\u7528\u6237<br>user.password=\u5bc6\u7801<br>user.button.login=\u767b\u5f55<br><br>MessageResource_en_us.properties文件中<br><br>user.title=User Login<br>user.username=User Name<br>user.password=Password<br>user.button.login=Login<br><br>### 步骤3：在jsp页面上用struts标签&lt;bean：message&gt;来读取国际化消息文本<br><br>引入标签：<br><br>&lt;%@ taglib prefix=”bean” uri=”<a href="http://struts.apache.org/tags-bean&quot;%" target="_blank" rel="external">http://struts.apache.org/tags-bean”%</a>&gt;<br><br>&lt;form action=”login.do” method=”post”&gt;<br>  &lt;bean:message key=”user.username”/&gt;：&lt;input type=”text” name=”username”&gt;&lt;br&gt;<br>  &lt;bean:message key=”user.password”/&gt;：&lt;input type=”password” name=”password”&gt;&lt;br&gt;<br>  &lt;input type=”submit” value=”&lt;bean:message key=”user.button.login”/&gt;”&gt;<br> &lt;/form&gt;<br><br>bean：message中的属性key指的是国际化文件中的键。<br><br>一个local对应一个session<br><br>## 二，国际化的切换<br><br>jsp页面：<br><br>  &lt;a href=”changelang.do?lang=zh”&gt;中文&lt;/a&gt;&amp;nbsp&amp;nbsp&amp;nbsp&lt;a href=”changelang.do?lang=en”&gt;英文&lt;/a&gt;<br><br>添加一个Action：<br><br>public ActionForward execute(ActionMapping mapping, ActionForm form,<br>   HttpServletRequest request, HttpServletResponse response)<br>   throws Exception {<br>  String lang = request.getParameter(“lang”);<br><br>//得到Locale<br>  Locale currentLocale = Locale.getDefault();<br>  if (“zh”.equals(lang)) {<br><br>       //自定义Locale<br>   currentLocale = new Locale(“zh”, “CN”);<br>  }else if(“en”.equals(lang)) {<br>   currentLocale = new Locale(“en”, “US”);<br>  }<br><br>  //自己设置Locale<br>  //request.getSession().setAttribute(Globals.LOCALE_KEY, currentLocale);<br>  //调用struts中提供的方法设置Locale<br>  this.setLocale(request, currentLocale);<br>  return mapping.findForward(“index”);<br> }<br><br> 配置国际化action：<br><br>&lt;action path=”/changelang”<br>    type=”com.bjsxt.struts.ChangeLanguageAction”<br>  &gt;<br>   &lt;forward name=”index” path=”/index.jsp”/&gt;<br>  &lt;/action&gt;<br><br> &lt;message-resources parameter=”res.MessageResources” /&gt;<br><br>res.MessageResources表示的是res包下的MessageResources文件。<br><br>## 三，动态信息的国际化<br><br>如果是与后台交互的数据，那么在国际化文件中就用占位符进行配置<br><br>resource.properties源文件：<br><br>user.login.success={0},登录成功<br>user.not.found=用户不能找到，用户名称=[{0}]<br>user.password.error=密码错误<br>user.login.error=登录失败<br><br>MessageResource_zh_cn.properties文件：<br><br>user.login.success={0},\u767b\u5f55\u6210\u529f<br>user.not.found=\u7528\u6237\u4e0d\u80fd\u627e\u5230\uff0c\u7528\u6237\u540d\u79f0=[{0}]<br>user.password.error=\u5bc6\u7801\u9519\u8bef<br>user.login.error=\u767b\u5f55\u5931\u8d25MessageResource_en_us.properties文件：<br><br>user.login.success={0},Login Success<br>user.not.found=User Not Found,UserName[{0}]<br>user.password.error=Password Error<br>user.login.error=Login Error<br><br>Action中的代码：<br><br>package com.bjsxt.struts;<br><br>import javax.servlet.http.HttpServletRequest;<br>import javax.servlet.http.HttpServletResponse;<br><br>import org.apache.struts.action.Action;<br>import org.apache.struts.action.ActionForm;<br>import org.apache.struts.action.ActionForward;<br>import org.apache.struts.action.ActionMapping;<br>import org.apache.struts.action.ActionMessage;<br>import org.apache.struts.action.ActionMessages;<br><br>/<em>*  
 </em> 用户登录的Action<br> <em> @author Administrator
 </em><br> */<br>public class LoginAction extends Action {<br><br> public ActionForward execute(ActionMapping mapping, ActionForm form,<br>   HttpServletRequest request, HttpServletResponse response)<br>   throws Exception {<br>  LoginActionForm laf = (LoginActionForm)form;<br>  String username = laf.getUsername();<br>  String password = laf.getPassword();<br><br>  ActionMessages messages = new ActionMessages();<br>  try {<br>   UserManager.getInstance().login(username, password);<br><br>   //创建国际化消息文本<br>   ActionMessage message = new ActionMessage(“user.login.success”, username);<br>   //ActionMessage message = new ActionMessage(“user.login.success”, new Object[]{username});//其中Object数组表示的是占位符<br>   messages.add(“loginSuccess1”, message);<br><br>   ActionMessage message1 = new ActionMessage(“user.login.success”, username);<br>   messages.add(“loginSuccess2”, message1);<br><br>   //传递国际化消息文本<br>   this.saveMessages(request, messages);<br>   return mapping.findForward(“success”);<br>  }catch(UserNotFoundException unfe) {<br>   unfe.printStackTrace();<br><br>   //创建国际化消息文本<br>   ActionMessage message = new ActionMessage(“user.not.found”, username);<br>   messages.add(“error1”, message);<br><br>   //传递国际化消息文本<br>   this.saveErrors(request, messages);<br>  }catch(PasswordErrorException pee) {<br>   pee.printStackTrace();<br>   //创建国际化消息文本<br>   ActionMessage message = new ActionMessage(“user.password.error”);<br>   messages.add(“error2”, message);<br><br>   //传递国际化消息文本<br>   this.saveErrors(request, messages);<br>  }<br>  return mapping.findForward(“error”);<br> }<br><br>}<br><br>一个ActionMessage表示一条国际化信息。<br><br>Action配置：<br><br>&lt;message-resources parameter=”res.MessageResources” /&gt;<br><br>&nbsp;<br><br>&nbsp;<br><br></div>

<h1 id="二，struts-2"><a href="#二，struts-2" class="headerlink" title="二，struts 2"></a>二，struts 2</h1><p>&nbsp;</p>
<h2 id="1-首先在struts-properties文件中加入以下内容"><a href="#1-首先在struts-properties文件中加入以下内容" class="headerlink" title="1.首先在struts.properties文件中加入以下内容:"></a>1.首先在struts.properties文件中加入以下内容:</h2><p>struts.custom.i18n.resources=messageResource<br>或在struts.xml中加入<br>&lt;constant name=”struts.custom.i18n.resources” value=”messageResource”&gt;&lt;/constant&gt;</p>
<h2 id="2-资源文件的命名格式"><a href="#2-资源文件的命名格式" class="headerlink" title="2.资源文件的命名格式:"></a>2.资源文件的命名格式:</h2><p>名称<em>语言代码</em>国家代码. Properties<br>如果创建中文和英语国际化,那么资源文件名称为<br>messageResource_zh_CN.properties和messageResource_en_US.properties</p>
<h2 id="3-jsp页面的国际化"><a href="#3-jsp页面的国际化" class="headerlink" title="3. jsp页面的国际化"></a>3. jsp页面的国际化</h2><p><span class="Apple-converted-space"> </span><br>通过使用标签&lt;s:text name=”label.helloWorld”/&gt;输出国际化<br>label.helloWorld为资源文件中定义的key</p>
<p>在messageResource_en_US.properties加入以下内容<br>label.hello=hello {0}<br>label.helloWorld=hello,world</p>
<p>在messageResource_zh_CN.properties加入以下内容<br>label.hello=你好 {0}<br>label.helloWorld=你好,世界</p>
<p>(1). &lt;s:text name=”label.helloWorld”/&gt;<br>&lt;s:property value=”%{getText(‘label.helloWorld’)}”/&gt;<br>上面两个都为输出一个hello word的两种表示</p>
<p>&lt;s:textfield name=”name” key=”label.helloWorld”/&gt;<br>&lt;s:textfield name=”name” label=”%{getText(‘label.helloWorld’)}”/&gt;<br>显示一个文本框,文本框的标题进行国际化</p>
<p>(2). 使用&lt;s:i18n&gt;标签指定从某个特定的资源文件中取数据<br>&lt;s:i18n name=”messageResource”&gt;<br>   &lt;s:text name=”label.helloWorld”&gt;&lt;/s:text&gt;<br>&lt;/s:i18n&gt;<br>指定在从messageResource取资源</p>
<p>(3).<br>&lt;s:text name=”label.hello”&gt;<br>   &lt;s:param&gt;callan&lt;/s:param&gt;<br>&lt;/s:text&gt;<br>使用带参数的资源.&lt;s:param&gt;可以替换label.hello=hello {0}中的{0}</p>
<h2 id="4-Action的国际化"><a href="#4-Action的国际化" class="headerlink" title="4. Action的国际化"></a>4. Action的国际化</h2><p>Action的国际化主要是通过getText(String key)方法实现的</p>
<p><span style="text-align: left; text-transform: none; background-color: #f8f8f8; text-indent: 0px; margin: 0px; font: 12px/18px Consolas, 'Courier New', Courier, mono, serif; white-space: normal; letter-spacing: normal; color: black; word-spacing: 0px; -webkit-text-stroke-width: 0px; padding: 0px;">String str1 = getText(</span><span class="string" style="text-align: left; text-transform: none; background-color: #f8f8f8; text-indent: 0px; margin: 0px; font: 12px/18px Consolas, 'Courier New', Courier, mono, serif; white-space: normal; letter-spacing: normal; color: blue; word-spacing: 0px; -webkit-text-stroke-width: 0px; padding: 0px;"><span style="margin: 0px; color: #0000ff; padding: 0px;">“label.helloWorld”</span></span><span style="text-align: left; text-transform: none; background-color: #f8f8f8; text-indent: 0px; margin: 0px; font: 12px/18px Consolas, 'Courier New', Courier, mono, serif; white-space: normal; letter-spacing: normal; color: black; word-spacing: 0px; -webkit-text-stroke-width: 0px; padding: 0px;">);<span class="Apple-converted-space"> </span></span></p>
<h2 id="5-参数化国际化"><a href="#5-参数化国际化" class="headerlink" title="5. 参数化国际化"></a>5. 参数化国际化</h2><p>在messageResource_en_US.properties加入以下内容<br>userName=userName<br>userName.required=${getText(‘userName’)} is required</p>
<p>在messageResource_zh_CN.properties加入以下内容<br>userName=用户名<br>userName.required=${getText(‘userName’)} 不能为空</p>
<p>在Action中<br>String str4 = getText(“userName.required”);<br>System.out.println(str4);</p>
<p>userName.required=${getText(‘userName’)}会取国际化的用户名</p>
<h2 id="6-使用校验框价时-提示信息可以国际化"><a href="#6-使用校验框价时-提示信息可以国际化" class="headerlink" title="6. 使用校验框价时,提示信息可以国际化"></a>6. 使用校验框价时,提示信息可以国际化</h2><p>   &lt;field name=”userName”&gt;<br>   &lt;field-validator type=”requiredstring”&gt;<br>    &lt;message key=”userName.required”&gt; &lt;/message&gt;<br>   &lt;/field-validator&gt;<br>&lt;/field&gt;</p>
<p>&nbsp;</p>
<h1 id="三，项目解决方案"><a href="#三，项目解决方案" class="headerlink" title="三，项目解决方案:"></a>三，项目解决方案:</h1><p> 由于老板的需求，是要在配置文件里面进行单一性质的修改，所以我的解决方案如下：</p>
<p>修改struts配置文件web.xml<br>添加/WEB-INF/language.xml分支</p>
<p>/WEB-INF/language.xml设置要读取的字库</p>
<p>读取<br>config/Language_Chinese.properties<br>config/Language_English.properties</p>
<p>JSP页面</p>
<p>包含struts-lib<br>&lt;%@ taglib prefix=”bean” uri=”<a href="http://struts.apache.org/tags-bean&quot;%" target="_blank" rel="external">http://struts.apache.org/tags-bean”%</a>&gt;</p>
<p>使用标签<br>&lt;bean:message key=”hello”/&gt;</p>
<p>切换语言方法：找到 WEB_INF/language.xml 按照注释内容进行修改</p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/08/27/pulltorefresh/" itemprop="url">
                  Android-开源项目-下拉刷新PullToRefresh使用心得
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-08-27T22:27:44+08:00" content="2014-08-27">
              2014-08-27
            </time>
          </span>

<span class="post-count">&nbsp; | &nbsp;字数 1,833</span>
<span class="post-count">&nbsp; | &nbsp;预计阅读 8分钟</span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Android开发/" itemprop="url" rel="index">
                    <span itemprop="name">Android开发</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/08/27/pulltorefresh/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/08/27/pulltorefresh/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&nbsp;</p>
<blockquote>
<p>在许许多多的android项目中，下拉刷新是必不可少的一个小模块，最近的一个项目中，很多模块都需要实现这么一个功能，最后采用的是Github上很火的开源项目，PullToRefresh，下面，简单说一下PullToRefresh的使用方法和个人的心得。<br>开源项目地址：<a href="https://github.com/johannilsson/android-pulltorefresh" target="_blank" rel="external">https://github.com/johannilsson/android-pulltorefresh</a></p>
</blockquote>
<h2 id="1-使用方法"><a href="#1-使用方法" class="headerlink" title="1 使用方法"></a>1 使用方法</h2><h3 id="1-1-导入lib项目，设置项目关联"><a href="#1-1-导入lib项目，设置项目关联" class="headerlink" title="1.1 导入lib项目，设置项目关联"></a>1.1 导入lib项目，设置项目关联</h3><p>到开源项目的官网下载整个项目，导入到eclipse中，到你的主项目，右键，项目属性，选择android，在最下面，把刚刚导入进来的pulltorefresh项目add成为一个lib引用。如图：点击放大</p>
<p><a href="http://www.qiushurong.cn/wp-content/uploads/2014/08/pulltorefresh-1.jpg" target="_blank" rel="external"><img src="http://www.qiushurong.cn/wp-content/uploads/2014/08/pulltorefresh-1-300x220.jpg" alt="pulltorefresh-1"></a></p>
<h3 id="1-2-在需要使用下拉刷新的layout中，添加下拉刷新list-或者其他类型-，如图-点击放大"><a href="#1-2-在需要使用下拉刷新的layout中，添加下拉刷新list-或者其他类型-，如图-点击放大" class="headerlink" title="1.2 在需要使用下拉刷新的layout中，添加下拉刷新list(或者其他类型)，如图:点击放大"></a>1.2 在需要使用下拉刷新的layout中，添加下拉刷新list(或者其他类型)，如图:点击放大</h3><p><a href="http://www.qiushurong.cn/wp-content/uploads/2014/08/pulltorefresh-2.jpg" target="_blank" rel="external"><img src="http://www.qiushurong.cn/wp-content/uploads/2014/08/pulltorefresh-2-300x211.jpg" alt="pulltorefresh-2"></a></p>
<p>附上代码以及解释：</p>
<pre class="lang:java decode:true" title="下拉刷新 XML">   &lt;!-- 带下拉刷新的ListView --&gt;
   &lt;com.handmark.pulltorefresh.library.PullToRefreshListView
        xmlns:ptr="http://schemas.android.com/apk/res-auto"
        android:id="@+id/pull_refresh_list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:cacheColorHint="#00000000"
        android:divider="#19000000"
        android:dividerHeight="4dp"
        android:fadingEdge="none"
        android:fastScrollEnabled="false"
        android:footerDividersEnabled="false"
        android:headerDividersEnabled="false"
        android:smoothScrollbar="true"
        ptr:ptrAnimationStyle="rotate" //下拉时，图标的动画，rotate是旋转
        ptr:ptrHeaderBackground="#FFF8F8F8" //下拉时，滑出的下拉块背景颜色
        ptr:ptrMode="both" //下拉刷新的模式,both是上拉和下拉
    ptr:ptrDrawable="@drawable/loading4"&gt; //下拉时候的图标</pre>

<h3 id="1-3-在代码中对下拉刷新进行更详细的配置"><a href="#1-3-在代码中对下拉刷新进行更详细的配置" class="headerlink" title="1.3 在代码中对下拉刷新进行更详细的配置"></a>1.3 在代码中对下拉刷新进行更详细的配置</h3><p>首先是获取实例</p>
<pre class="lang:java decode:true">mPullRefreshListView = (PullToRefreshListView) 
    parentView.findViewById(R.id.pull_refresh_list);</pre>
 设置音效
<pre class="lang:java decode:true " title="设置刷新音效">        SoundPullEventListener&lt;ListView&gt; soundListener = new SoundPullEventListener&lt;ListView&gt;(parentActivity);
        soundListener.addSoundEvent(State.PULL_TO_REFRESH, R.raw.pull_event);
        soundListener.addSoundEvent(State.RESET, R.raw.reset_sound);
        soundListener.addSoundEvent(State.REFRESHING, R.raw.refreshing_sound);
        mPullRefreshListView.setOnPullEventListener(soundListener);</pre>
 设置提示文字
<pre class="lang:java decode:true">//设置提示信息
ILoadingLayout startLabels = mPullRefreshListView
        .getLoadingLayoutProxy();
startLabels.setPullLabel("向下拉刷新...");// 刚下拉时，显示的提示
startLabels.setRefreshingLabel("松开刷新...");// 刷新时
startLabels.setReleaseLabel("正在加载中...");// 下来达到一定距离时</pre>
关于设置提示文字的，有一个地方要说的是， 

mPullRefreshListView.getLoadingLayoutProxy(参数，参数);

这一句，不传参数的话，默认是同时设置 下拉刷新 和 上拉加载更多 的文本。

添加参数：true,false 是设置 下拉刷新 的文本。

添加参数：false,true 是设置 上拉加载更多 的文本。

 例如：
<pre class="lang:java decode:true ">        //设置 下拉刷新 提示信息
        ILoadingLayout startLabels = mPullRefreshListView.getLoadingLayoutProxy(true,false);
        startLabels.setPullLabel("下拉重新刷新...");// 刚下拉时，显示的提示
        startLabels.setRefreshingLabel("不要命刷新中...");// 刷新时
        startLabels.setReleaseLabel("松开重新刷新...");// 下来达到一定距离时
        //设置 加载更多 提示信息
        ILoadingLayout endLabels = mPullRefreshListView.getLoadingLayoutProxy(false,true);
        endLabels.setPullLabel("上拉加载更多...");// 刚下拉时，显示的提示
        endLabels.setRefreshingLabel("不要命加载中...");// 刷新时
        endLabels.setReleaseLabel("松开加载更多...");// 下来达到一定距离时</pre>
 效果：

[![pulltorefresh-3](http://www.qiushurong.cn/wp-content/uploads/2014/08/pulltorefresh-3-300x191.jpg)](http://www.qiushurong.cn/wp-content/uploads/2014/08/pulltorefresh-3.jpg)

### 1.4 添加一个监听器

<pre class="lang:java decode:true " title="设置刷新监听器">// 设置刷新监听器
mPullRefreshListView.setOnRefreshListener(new OnRefreshListener&lt;ListView&gt;() {
    @Override
    public void onRefresh(PullToRefreshBase&lt;ListView&gt; refreshView) {
        // 设置最近刷新时间为当前时间
        String label = DateUtils.formatDateTime(parentActivity.getApplicationContext(), System.currentTimeMillis(),
                DateUtils.FORMAT_SHOW_TIME | DateUtils.FORMAT_SHOW_DATE | DateUtils.FORMAT_ABBREV_ALL);
        refreshView.getLoadingLayoutProxy().setLastUpdatedLabel(label);

        // 在这这个GetDataTask线程里面进行刷新处理
        new GetDataTask().execute();
    }
});</pre>
 这样就完成了一个下拉刷新的操作了

但是我们现在并没有添加任何UI，一般来说，都是利用这个下拉刷新listview本身进行条目UI的操作的。

### 1.5 在PullToRefreshListView中获取我们要的listView

如下：直接获取这个PullToRefreshListView的里面嵌套的listview，来存放我们要显示的内容
<pre class="lang:java decode:true ">ListView actualListView = mPullRefreshListView.getRefreshableView();
//这个actualListView 就是我们真正可以用来放数据的视图view
// 注册视图
registerForContextMenu(actualListView);
//实例化一个list，存放我们的数据
mListItems = new LinkedList&lt;String&gt;();
mListItems.add("初始化数据");
//实例化一个适配器，把数据和UI进行关联
mAdapter = new ArrayAdapter&lt;String&gt;(parentActivity,
    android.R.layout.simple_list_item_1, mListItems);</pre>

<h3 id="1-6-区分-下拉刷新-和-上拉加载更多-重要"><a href="#1-6-区分-下拉刷新-和-上拉加载更多-重要" class="headerlink" title="1.6 区分  下拉刷新 和 上拉加载更多 [重要]"></a>1.6 区分  下拉刷新 和 上拉加载更多 [重要]</h3><p>既然有 下拉刷新 和 上拉加载更多，但他们都是同一个被调用的方法,那么怎么区分呢？</p>
<p>方法：修改开源项目，添加对header和footer的判断，通过header和footer的是否显示 来判断是上拉还是下拉</p>
<p>首先，在我们之前导入的项目中，找到PullToRefreshAdapterViewBase这个类</p>
<p>添加这么2个方法</p>
<pre class="lang:java decode:true ">    public boolean isHeaderShown() {
        return getHeaderLayout().isShown();
    }  

    public boolean isFooterShown() {  
        return getFooterLayout().isShown(); 
    }  
</pre>
 然后clean一下主项目，让他重建一下lib包，之后在主项目的监听器里面，进行判断
<pre class="lang:java decode:true " title="onRefresh">mPullRefreshListView.setOnRefreshListener(new OnRefreshListener&lt;ListView&gt;() {
    @Override
    public void onRefresh(PullToRefreshBase&lt;ListView&gt; refreshView) {

        //这2个方法是我修改了 PullToRefresh 项目后添加进去的，原本开源的项目是没有的。

        //判断是 上拉 还是 下拉
        if(mPullRefreshListView.isHeaderShown()){
            String label = DateUtils.formatDateTime(parentActivity.getApplicationContext(), System.currentTimeMillis(),DateUtils.FORMAT_SHOW_TIME | DateUtils.FORMAT_SHOW_DATE | DateUtils.FORMAT_ABBREV_ALL);
            refreshView.getLoadingLayoutProxy(true,false).setLastUpdatedLabel(label);
            // 开始下拉刷新
                    }else if(mPullRefreshListView.isFooterShown()){
            String label = DateUtils.formatDateTime(parentActivity.getApplicationContext(), System.currentTimeMillis(),DateUtils.FORMAT_SHOW_TIME | DateUtils.FORMAT_SHOW_DATE | DateUtils.FORMAT_ABBREV_ALL);
            refreshView.getLoadingLayoutProxy(false,true).setLastUpdatedLabel(label);
            // 开始加载更多
                    }
    }
});</pre>
 这样子就初步实现了一个区分的功能了

### 1.7 在list尾端添加监听器

有时候我们需要在用户滑动到list尾端的时候进行一个提示，或者进行数据的加载，那么会用到这个：
<pre class="lang:java decode:true ">// 在list尾端添加一个监听器
        mPullRefreshListView.setOnLastItemVisibleListener(new OnLastItemVisibleListener() {
            @Override
            public void onLastItemVisible() {
                Toast.makeText(parentActivity, "到达尾端，上拉可加载更多...", Toast.LENGTH_SHORT).show();
            }
        });</pre>

<h2 id="2-使用心得"><a href="#2-使用心得" class="headerlink" title="2 使用心得"></a>2 使用心得</h2><p>(明天再续)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/head.jpg"
               alt="邱树荣" />
          <p class="site-author-name" itemprop="name">邱树荣</p>
          <p class="site-description motion-element" itemprop="description">致力于计算机程式开发</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">110</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">16</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">195</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="powered-by" >
  
  <span itemprop="copyrightYear">&copy;2016 - 2026</span>

  <a style="" class="theme-link" href="https://qiushurong.github.io">
    小树技术博客
  </a>

</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  粤ICP备<a class="theme-link" href="https://qiushurong.github.io">
    15021480
  </a>号
</div>

        

        
      </div>
    </footer>

    <!--qsuron20160418 返回顶部更换为火箭
    div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div-->

    <a id="rocket" href="#top" class=""></a>


  </div>


  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"qsuron"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
      
      <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
      <script src="/js/src/hook-duoshuo.js"></script>
    
  





  
  
  

  

  

</body>
</html>
